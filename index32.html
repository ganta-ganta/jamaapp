<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JamaApp - Smart Farm Management System</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@300;400;500;600;700&family=Noto+Sans+Devanagari:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2E7D32;
            --secondary-color: #4CAF50;
            --accent-color: #FF6B35;
            --background-light: #F5F7FA;
            --background-dark: #1A1A1A;
            --text-primary: #212121;
            --text-secondary: #757575;
            --card-bg: #FFFFFF;
            --border-color: #E0E0E0;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --error-color: #F44336;
            --info-color: #2196F3;
            --shadow: 0 4px 20px rgba(0,0,0,0.1);
            --border-radius: 16px;
        }

        [data-theme="dark"] {
            --background-light: #121212;
            --background-dark: #1A1A1A;
            --card-bg: #1E1E1E;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --border-color: #333;
            --shadow: 0 4px 20px rgba(255,255,255,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background-light);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .telugu-text {
            font-family: 'Noto Sans Telugu', sans-serif;
        }

        .hindi-text {
            font-family: 'Noto Sans Devanagari', sans-serif;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            color: white;
        }

        .loading-logo {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .loading-logo i {
            font-size: 3.5rem;
            animation: rotate 2s linear infinite;
        }

        .loading-progress {
            width: 250px;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 1.5rem;
            position: relative;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #fff, #a5d6a7);
            border-radius: 3px;
            animation: loading 3s ease-in-out forwards;
        }

        @keyframes loading {
            from { width: 0%; }
            to { width: 100%; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Authentication Styles */
        .auth-container {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            position: relative;
            overflow: hidden;
        }

        .auth-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('https://images.unsplash.com/photo-1625246333195-78d9c38ad449?w=1200&h=800&fit=crop&crop=center&auto=format&q=60') center/cover;
            opacity: 0.1;
            z-index: 0;
        }

        .auth-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 450px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .auth-logo {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .auth-logo i {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .phone-input-container {
            position: relative;
            display: flex;
            gap: 0.5rem;
        }

        .country-code {
            background: var(--primary-color);
            color: white;
            padding: 0.875rem 1rem;
            border-radius: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .form-group {
            margin-bottom: 1.2rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 0.875rem 1.125rem;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-primary);
            font-family: inherit;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
            transform: translateY(-2px);
        }

        /* Enhanced Range Slider */
        .range-container {
            position: relative;
            margin: 1rem 0;
        }

        .range-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--border-color) 0%, var(--primary-color) 100%);
            outline: none;
            -webkit-appearance: none;
        }

        .range-slider::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(46, 125, 50, 0.3);
            transition: all 0.2s ease;
        }

        .range-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(46, 125, 50, 0.4);
        }

        .range-value {
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .custom-area-input {
            margin-top: 0.5rem;
            display: none;
        }

        .custom-area-input.show {
            display: block;
        }

        /* Image Upload Styles */
        .image-upload-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }

        .crop-image-preview {
            width: 100px;
            height: 100px;
            border-radius: 12px;
            border: 3px dashed var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(46, 125, 50, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .crop-image-preview:hover {
            border-color: var(--primary-color);
            background: rgba(46, 125, 50, 0.1);
        }

        .crop-image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }

        .crop-image-preview i {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .image-upload-input {
            display: none;
        }

        .btn {
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(46, 125, 50, 0.3);
        }

        .btn-secondary {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #66bb6a);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #ffb74d);
            color: white;
        }

        .btn-error {
            background: linear-gradient(135deg, var(--error-color), #e57373);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, var(--info-color), #42a5f5);
            color: white;
        }

        .btn-large {
            padding: 1.125rem 2rem;
            font-size: 1.1rem;
            border-radius: 14px;
        }

        .btn-google {
            background: linear-gradient(135deg, #DB4437, #C23321);
            color: white;
            width: 100%;
            margin: 0.5rem 0;
        }

        .btn-phone {
            background: linear-gradient(135deg, #0084FF, #0066CC);
            color: white;
            width: 100%;
            margin: 0.5rem 0;
        }

        /* Main App Layout */
        .app-container {
            display: none;
            min-height: 100vh;
        }

        .app-header {
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        [data-theme="dark"] .app-header {
            background: linear-gradient(135deg, rgba(30,30,30,0.95), rgba(30,30,30,0.9));
        }

        .app-logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(46, 125, 50, 0.1);
            transform: scale(1.1);
        }

        .main-content {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9));
            backdrop-filter: blur(15px);
            border-right: 1px solid var(--border-color);
            padding: 1rem 0;
            overflow-y: auto;
        }

        [data-theme="dark"] .sidebar {
            background: linear-gradient(180deg, rgba(30,30,30,0.95), rgba(30,30,30,0.9));
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin: 0.25rem 0;
        }

        .sidebar-nav a {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            border-right: 3px solid transparent;
            position: relative;
        }

        .sidebar-nav a::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            transition: width 0.3s ease;
            opacity: 0.1;
        }

        .sidebar-nav a:hover::before,
        .sidebar-nav a.active::before {
            width: 100%;
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            color: var(--primary-color);
            background: rgba(46, 125, 50, 0.05);
            border-right-color: var(--primary-color);
            transform: translateX(5px);
        }

        .sidebar-nav i {
            margin-right: 0.75rem;
            width: 20px;
            text-align: center;
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }

        [data-theme="dark"] .content-area {
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
        }

        /* Enhanced Dashboard Cards */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        [data-theme="dark"] .card:hover {
            box-shadow: 0 15px 40px rgba(255,255,255,0.1);
        }

        /* Enhanced Crop Cards */
        .crop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 2rem;
        }

        .crop-card {
            position: relative;
            overflow: hidden;
            background: var(--card-bg);
            animation: slideInUp 0.5s ease;
        }

        .crop-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .crop-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .crop-name {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
        }

        .status-badge {
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
            white-space: nowrap;
        }

        .status-active {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(139, 195, 74, 0.2));
            color: var(--success-color);
        }

        .status-harvested {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.2));
            color: var(--warning-color);
        }

        .status-planned {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(66, 165, 245, 0.2));
            color: var(--info-color);
        }

        .crop-info {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            display: grid;
            gap: 0.6rem;
        }

        .crop-info div {
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }

        .crop-progress {
            margin: 1.5rem 0;
        }

        .crop-progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .progress {
            width: 100%;
            height: 14px;
            background: var(--border-color);
            border-radius: 7px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transition: width 0.3s ease;
            border-radius: 7px;
        }

        /* Weather Widget in Crop Card */
        .crop-weather {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            text-align: center;
        }

        .crop-weather-title {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }

        .weather-forecast {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .forecast-day {
            text-align: center;
            font-size: 0.7rem;
        }

        .forecast-day i {
            display: block;
            margin-bottom: 0.25rem;
        }

        .rain-chance {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 0.25rem;
            margin-top: 0.25rem;
        }

        /* Large Action Buttons */
        .crop-actions {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .crop-actions .btn-large {
            padding: 0.875rem;
            font-size: 0.9rem;
        }

        .harvest-btn {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--accent-color), #ff5722);
            color: white;
            padding: 1rem;
            font-size: 1rem;
            font-weight: 600;
        }

        /* Enhanced Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .modal-content {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border-radius: var(--border-radius);
            padding: 2rem;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: var(--error-color);
            color: white;
            transform: scale(1.1);
        }

        /* Auto-save indicator */
        .auto-save-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 3000;
        }

        .auto-save-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        .auto-save-indicator.saving {
            background: var(--warning-color);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border-top: 1px solid var(--border-color);
            padding: 0.5rem;
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
        }

        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            border-radius: 12px;
        }

        .mobile-nav-item.active,
        .mobile-nav-item:hover {
            color: var(--primary-color);
            background: rgba(46, 125, 50, 0.1);
            transform: translateY(-3px);
        }

        .mobile-nav-item i {
            font-size: 1.4rem;
            margin-bottom: 0.25rem;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 100px;
            right: 2rem;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(46, 125, 50, 0.3);
            transition: all 0.3s ease;
            z-index: 999;
        }

        .fab:hover {
            transform: scale(1.1) rotate(45deg);
            box-shadow: 0 12px 35px rgba(46, 125, 50, 0.4);
        }

        /* Touch-Friendly Quick Actions */
        .quick-actions-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            z-index: 3000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .quick-actions-menu {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            max-width: 400px;
            width: 90%;
        }

        .quick-action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem;
            border-radius: 12px;
            background: rgba(46, 125, 50, 0.05);
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-action-btn:hover {
            background: rgba(46, 125, 50, 0.1);
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .quick-action-btn i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .quick-action-btn span {
            font-weight: 500;
            text-align: center;
            font-size: 0.9rem;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            z-index: 3000;
            animation: slideInRight 0.3s ease;
            max-width: 350px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .notification.success {
            background: linear-gradient(135deg, var(--success-color), #66bb6a);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--error-color), #e57373);
        }

        .notification.warning {
            background: linear-gradient(135deg, var(--warning-color), #ffb74d);
        }

        .notification.info {
            background: linear-gradient(135deg, #2196f3, #42a5f5);
        }

        /* Location Display */
        .current-location {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }

            .mobile-nav {
                display: block;
            }

            .content-area {
                padding: 1rem;
                padding-bottom: 90px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .crop-grid {
                grid-template-columns: 1fr;
            }

            .fab {
                bottom: 110px;
                right: 1rem;
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .modal-content {
                margin: 0.5rem;
                padding: 1.5rem;
            }

            .crop-actions {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .auth-card {
                padding: 2rem;
                margin: 1rem;
            }

            .header-actions {
                gap: 0.5rem;
            }

            .header-actions select {
                font-size: 0.8rem;
                padding: 0.3rem;
            }

            .quick-actions-menu {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .weather-forecast {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .auth-card {
                padding: 1.5rem;
            }

            .app-header {
                padding: 0.75rem 1rem;
            }

            .modal-content {
                padding: 1rem;
            }

            .crop-image {
                height: 150px;
            }

            .fab {
                width: 55px;
                height: 55px;
                font-size: 1.3rem;
            }
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-success { color: var(--success-color); }
        .text-warning { color: var(--warning-color); }
        .text-error { color: var(--error-color); }
        .text-primary { color: var(--primary-color); }
        .text-secondary { color: var(--text-secondary); }
        
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        
        .p-1 { padding: 0.5rem; }
        .p-2 { padding: 1rem; }
        .p-3 { padding: 1.5rem; }
        
        .flex { display: flex; }
        .flex-center { display: flex; justify-content: center; align-items: center; }
        .flex-between { display: flex; justify-content: space-between; align-items: center; }
        .flex-column { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        
        .grid { display: grid; }
        .grid-2 { grid-template-columns: 1fr 1fr; }
        .grid-3 { grid-template-columns: 1fr 1fr 1fr; }
        .grid-4 { grid-template-columns: 1fr 1fr 1fr 1fr; }
        
        .gap-1 { gap: 0.5rem; }
        .gap-2 { gap: 1rem; }
        .gap-3 { gap: 1.5rem; }
        
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        .hidden { display: none; }
        .block { display: block; }
        
        .rounded { border-radius: 8px; }
        .rounded-lg { border-radius: 12px; }
        .rounded-xl { border-radius: 16px; }
        .rounded-full { border-radius: 50%; }
        
        .shadow { box-shadow: var(--shadow); }
        .shadow-lg { box-shadow: 0 6px 25px rgba(0,0,0,0.15); }
        
        .cursor-pointer { cursor: pointer; }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .empty-state p {
            margin-bottom: 2rem;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        /* Ideas Section Styles */
        .ideas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .idea-card {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05), rgba(255, 107, 53, 0.1));
            border-left: 4px solid var(--accent-color);
        }

        .idea-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .idea-category {
            font-size: 0.8rem;
            background: var(--accent-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 0.5rem;
        }

        .idea-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .idea-description {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .idea-benefits {
            list-style: none;
            margin-bottom: 1rem;
        }

        .idea-benefits li {
            padding: 0.25rem 0;
            position: relative;
            padding-left: 1.5rem;
        }

        .idea-benefits li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
        }

        .stat-card {
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0.5rem 0;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .stat-change {
            font-size: 0.8rem;
            margin-top: 0.5rem;
            padding: 0.25rem 0.5rem;
            border-radius: 20px;
        }

        .stat-change.positive {
            color: var(--success-color);
            background: rgba(76, 175, 80, 0.1);
        }

        .stat-change.negative {
            color: var(--error-color);
            background: rgba(244, 67, 54, 0.1);
        }
    </style>
</head>
<body>
    <!-- Auto-save indicator -->
    <div id="autoSaveIndicator" class="auto-save-indicator">
        <i class="fas fa-check-circle"></i> <span data-translate="autoSaved">Auto-saved</span>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-logo">
            <i class="fas fa-seedling"></i>
            ‡∞ú‡∞Æ‡∞æApp
        </div>
        <div class="loading-progress">
            <div class="loading-progress-bar"></div>
        </div>
        <p data-translate="initializing">‡∞Æ‡±Ä ‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç‚Äå‡∞®‡±Å ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...</p>
    </div>

    <!-- Quick Actions Overlay -->
    <div id="quickActionsOverlay" class="quick-actions-overlay">
        <div class="quick-actions-menu">
            <div class="quick-action-btn" onclick="showAddCropModal(); closeQuickActions();">
                <i class="fas fa-seedling"></i>
                <span data-translate="addCrop">‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡∞Ç‡∞ü</span>
            </div>
            <div class="quick-action-btn" onclick="showSection('dashboard'); closeQuickActions();">
                <i class="fas fa-chart-line"></i>
                <span data-translate="dashboard">‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç</span>
            </div>
            <div class="quick-action-btn" onclick="showSection('assets'); closeQuickActions();">
                <i class="fas fa-tractor"></i>
                <span data-translate="assets">‡∞Ü‡∞∏‡±ç‡∞§‡±Å‡∞≤‡±Å</span>
            </div>
            <div class="quick-action-btn" onclick="showSection('weather'); closeQuickActions();">
                <i class="fas fa-cloud-sun"></i>
                <span data-translate="weather">‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç</span>
            </div>
            <div class="quick-action-btn" onclick="showSection('ideas'); closeQuickActions();">
                <i class="fas fa-lightbulb"></i>
                <span data-translate="ideas">‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å</span>
            </div>
            <div class="quick-action-btn" onclick="closeQuickActions();">
                <i class="fas fa-times"></i>
                <span data-translate="close">‡∞Æ‡±Ç‡∞∏‡∞ø‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
            </div>
        </div>
    </div>

    <!-- Authentication Container -->
    <div id="authContainer" class="auth-container">
        <div class="auth-card">
            <div class="auth-logo">
                <i class="fas fa-seedling"></i>
                ‡∞ú‡∞Æ‡∞æApp
            </div>
            <p style="margin-bottom: 2rem; color: #666; font-size: 1.1rem;" data-translate="smartFarmSystem">‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡±ç‡∞•</p>
            
            <!-- Login Form -->
            <div id="loginForm">
                <form id="emailLoginForm">
                    <div class="form-group">
                        <label for="loginEmail" data-translate="emailAddress">‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ</label>
                        <input type="email" id="loginEmail" class="form-control" required placeholder="" data-translate-placeholder="enterEmail">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword" data-translate="password">‡∞™‡∞æ‡∞∏‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞°‡±ç</label>
                        <input type="password" id="loginPassword" class="form-control" required placeholder="" data-translate-placeholder="enterPassword">
                    </div>
                    <button type="submit" class="btn btn-primary w-full" data-translate="signIn">‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</button>
                </form>
                
                <div style="margin: 1.5rem 0; text-align: center; color: #666;" data-translate="orContinueWith">‡∞≤‡±á‡∞¶‡∞æ ‡∞ï‡±ä‡∞®‡∞∏‡∞æ‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</div>
                
                <button id="googleSignIn" class="btn btn-google">
                    <i class="fab fa-google"></i> <span data-translate="signInWithGoogle">Google ‡∞§‡±ã ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç</span>
                </button>
                
                <button id="phoneSignIn" class="btn btn-phone">
                    <i class="fas fa-phone"></i> <span data-translate="signInWithPhone">‡∞´‡±ã‡∞®‡±ç ‡∞§‡±ã ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç</span>
                </button>
                
                <p style="margin-top: 1.5rem; text-align: center;">
                    <span data-translate="dontHaveAccount">‡∞ñ‡∞æ‡∞§‡∞æ ‡∞≤‡±á‡∞¶‡∞æ?</span>
                    <a href="#" id="showRegister" style="color: var(--primary-color); font-weight: 500;" data-translate="registerHere">‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</a>
                </p>
            </div>

            <!-- Registration Form -->
            <div id="registerForm" style="display: none;">
                <form id="emailRegisterForm">
                    <div class="grid grid-2 gap-2">
                        <div class="form-group">
                            <label for="regFirstName" data-translate="firstName">‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞™‡±á‡∞∞‡±Å</label>
                            <input type="text" id="regFirstName" class="form-control" required placeholder="" data-translate-placeholder="firstName">
                        </div>
                        <div class="form-group">
                            <label for="regLastName" data-translate="lastName">‡∞ö‡∞ø‡∞µ‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å</label>
                            <input type="text" id="regLastName" class="form-control" required placeholder="" data-translate-placeholder="lastName">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="regEmail" data-translate="emailAddress">‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ</label>
                        <input type="email" id="regEmail" class="form-control" required placeholder="" data-translate-placeholder="enterEmail">
                    </div>
                    <div class="form-group">
                        <label for="regPassword" data-translate="password">‡∞™‡∞æ‡∞∏‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞°‡±ç</label>
                        <input type="password" id="regPassword" class="form-control" required placeholder="" data-translate-placeholder="createPassword">
                    </div>
                    <div class="form-group">
                        <label for="regPhone" data-translate="phoneNumber">‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç</label>
                        <div class="phone-input-container">
                            <div class="country-code">
                                üáÆüá≥ +91
                            </div>
                            <input type="tel" id="regPhone" class="form-control" required placeholder="XXXXXXXXXX" pattern="[0-9]{10}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="regLocation" data-translate="location">‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç</label>
                        <input type="text" id="regLocation" class="form-control" required placeholder="" data-translate-placeholder="yourLocation">
                    </div>
                    <div class="grid grid-2 gap-2">
                        <div class="form-group">
                            <label for="regFarmSize" data-translate="farmSizeAcres">‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞≠‡±Ç‡∞Æ‡∞ø (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å)</label>
                            <input type="number" id="regFarmSize" class="form-control" step="0.1" required placeholder="0.0">
                        </div>
                        <div class="form-group">
                            <label for="regPrimaryCrop" data-translate="primaryCrop">‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞™‡∞Ç‡∞ü</label>
                            <select id="regPrimaryCrop" class="form-control" required>
                                <option value="" data-translate="selectPrimaryCrop">‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
                                <option value="rice">üåæ <span data-translate="rice">‡∞µ‡∞∞‡∞ø / Rice / ‡§ö‡§æ‡§µ‡§≤</span></option>
                                <option value="wheat">üåæ <span data-translate="wheat">‡∞ó‡±ã‡∞ß‡±Å‡∞Æ / Wheat / ‡§ó‡•á‡§π‡•Ç‡§Ç</span></option>
                                <option value="corn">üåΩ <span data-translate="corn">‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞® / Corn / ‡§Æ‡§ï‡•ç‡§ï‡§æ</span></option>
                                <option value="cotton">üåø <span data-translate="cotton">‡∞™‡∞§‡±ç‡∞§‡∞ø / Cotton / ‡§ï‡§™‡§æ‡§∏</span></option>
                                <option value="sugarcane">üéã <span data-translate="sugarcane">‡∞ö‡±Ü‡∞∞‡±Å‡∞ï‡±Å / Sugarcane / ‡§ó‡§®‡•ç‡§®‡§æ</span></option>
                                <option value="pulses">ü´ò <span data-translate="pulses">‡∞™‡∞™‡±ç‡∞™‡±Å‡∞≤‡±Å / Pulses / ‡§¶‡§æ‡§≤</span></option>
                                <option value="vegetables">ü•ï <span data-translate="vegetables">‡∞ï‡±Ç‡∞∞‡∞ó‡∞æ‡∞Ø‡∞≤‡±Å / Vegetables / ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡§æ‡§Ç</span></option>
                                <option value="fruits">üçé <span data-translate="fruits">‡∞™‡∞Ç‡∞°‡±ç‡∞≤‡±Å / Fruits / ‡§´‡§≤</span></option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary w-full" data-translate="createAccount">‡∞ñ‡∞æ‡∞§‡∞æ ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</button>
                </form>
                
                <p style="margin-top: 1.5rem; text-align: center;">
                    <span data-translate="alreadyHaveAccount">‡∞á‡∞™‡±ç‡∞™‡∞ü‡∞ø‡∞ï‡±á ‡∞ñ‡∞æ‡∞§‡∞æ ‡∞â‡∞Ç‡∞¶‡∞æ?</span>
                    <a href="#" id="showLogin" style="color: var(--primary-color); font-weight: 500;" data-translate="signInHere">‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</a>
                </p>
            </div>

            <!-- Phone OTP Form -->
            <div id="otpForm" style="display: none;">
                <div class="form-group">
                    <label for="phoneNumber" data-translate="phoneNumber">‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç</label>
                    <div class="phone-input-container">
                        <div class="country-code">
                            üáÆüá≥ +91
                        </div>
                        <input type="tel" id="phoneNumber" class="form-control" placeholder="XXXXXXXXXX" pattern="[0-9]{10}">
                    </div>
                </div>
                <div id="recaptcha-container"></div>
                <button id="sendOTP" class="btn btn-primary w-full" data-translate="sendOTP">OTP ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø</button>
                
                <div id="otpInput" style="display: none; margin-top: 1rem;">
                    <div class="form-group">
                        <label for="otpCode" data-translate="enterOTP">6-‡∞Ö‡∞Ç‡∞ï‡±Ü‡∞≤ OTP ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</label>
                        <input type="text" id="otpCode" class="form-control" maxlength="6" placeholder="123456">
                    </div>
                    <div id="otpTimer" class="text-center" style="margin-bottom: 1rem; color: #666;"></div>
                    <button id="verifyOTP" class="btn btn-primary w-full" data-translate="verifyOTP">OTP ‡∞ß‡±É‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</button>
                    <button id="resendOTP" class="btn btn-secondary w-full" style="margin-top: 0.5rem;" data-translate="resendOTP">OTP ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø</button>
                </div>
                
                <p style="margin-top: 1rem; text-align: center;">
                    <a href="#" id="backToLogin" style="color: var(--primary-color);" data-translate="backToLogin">‚Üê ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç‚Äå‡∞ï‡±Å ‡∞§‡∞ø‡∞∞‡∞ø‡∞ó‡∞ø</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="appContainer" class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="app-logo">
                <i class="fas fa-seedling"></i>
                ‡∞ú‡∞Æ‡∞æApp
            </div>
            <div class="header-actions">
                <div class="current-location" id="currentLocation">
                    <i class="fas fa-map-marker-alt"></i>
                    <span data-translate="detectingLocation">‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...</span>
                </div>
                <div class="language-selector">
                    <select id="languageSelect" class="form-control" style="width: auto; padding: 0.5rem;">
                        <option value="te">üáÆüá≥ ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                        <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                        <option value="en">üá∫üá∏ English</option>
                    </select>
                </div>
                <button class="theme-toggle" id="themeToggle" title="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="dropdown">
                    <button class="btn btn-secondary" id="profileDropdown" title="Profile menu" onclick="signOut()">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <div class="main-content">
            <!-- Sidebar Navigation -->
            <nav class="sidebar">
                <ul class="sidebar-nav">
                    <li><a href="#" onclick="showSection('dashboard')" class="active" id="nav-dashboard">
                        <i class="fas fa-tachometer-alt"></i> <span data-translate="dashboard">‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç</span>
                    </a></li>
                    <li><a href="#" onclick="showSection('crops')" id="nav-crops">
                        <i class="fas fa-seedling"></i> <span data-translate="cropManagement">‡∞™‡∞Ç‡∞ü ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£</span>
                    </a></li>
                    <li><a href="#" onclick="showSection('assets')" id="nav-assets">
                        <i class="fas fa-tractor"></i> <span data-translate="assetManagement">‡∞Ü‡∞∏‡±ç‡∞§‡±Å‡∞≤ ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£</span>
                    </a></li>
                    <li><a href="#" onclick="showSection('weather')" id="nav-weather">
                        <i class="fas fa-cloud-sun"></i> <span data-translate="weather">‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç</span>
                    </a></li>
                    <li><a href="#" onclick="showSection('ideas')" id="nav-ideas">
                        <i class="fas fa-lightbulb"></i> <span data-translate="ideas">‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å</span>
                    </a></li>
                    <li><a href="#" onclick="showSection('profile')" id="nav-profile">
                        <i class="fas fa-user-cog"></i> <span data-translate="profileSettings">‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç & ‡∞∏‡±Ü‡∞ü‡±ç‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç‡∞∏‡±ç</span>
                    </a></li>
                </ul>
            </nav>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section">
                    <h1 style="margin-bottom: 2rem; color: var(--primary-color);">
                        <i class="fas fa-chart-line"></i> <span data-translate="farmDashboard">‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç</span>
                    </h1>
                    
                    <div class="dashboard-grid">
                        <!-- Financial Summary Cards -->
                        <div class="card stat-card">
                            <i class="fas fa-rupee-sign text-success" style="font-size: 2.5rem; margin-bottom: 0.5rem;"></i>
                            <div class="stat-value" id="totalIncome">‚Çπ0</div>
                            <div class="stat-label" data-translate="totalIncome">‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç</div>
                            <div class="stat-change positive" id="incomeChange">+0% ‡∞ó‡∞§ ‡∞®‡±Ü‡∞≤ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø</div>
                        </div>

                        <div class="card stat-card">
                            <i class="fas fa-credit-card text-error" style="font-size: 2.5rem; margin-bottom: 0.5rem;"></i>
                            <div class="stat-value" id="totalExpenses">‚Çπ0</div>
                            <div class="stat-label" data-translate="totalExpenses">‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å</div>
                            <div class="stat-change negative" id="expenseChange">+0% ‡∞ó‡∞§ ‡∞®‡±Ü‡∞≤ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø</div>
                        </div>

                        <div class="card stat-card">
                            <i class="fas fa-chart-line text-primary" style="font-size: 2.5rem; margin-bottom: 0.5rem;"></i>
                            <div class="stat-value" id="netProfit">‚Çπ0</div>
                            <div class="stat-label" data-translate="netProfit">‡∞®‡∞ø‡∞ï‡∞∞ ‡∞≤‡∞æ‡∞≠‡∞Ç</div>
                            <div class="stat-change positive" id="profitChange">+0% ‡∞ó‡∞§ ‡∞®‡±Ü‡∞≤ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø</div>
                        </div>

                        <!-- Transaction Management Card ---
                        <div class="card">
                            <h3 style="color: var(--primary-color); margin-bottom: 1rem;">
                                <i class="fas fa-coins"></i> <span data-translate="transactionManagement">‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£</span>
                            </h3>
                            <div style="display: grid; gap: 0.75rem;">
                                <button class="btn btn-success btn-large" onclick="addQuickTransaction('income')">
                                    <i class="fas fa-plus-circle"></i> <span data-translate="addIncome">‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                                </button>
                                <button class="btn btn-warning btn-large" onclick="addQuickTransaction('expense')">
                                    <i class="fas fa-minus-circle"></i> <span data-translate="addExpense">‡∞ñ‡∞∞‡±ç‡∞ö‡±Å ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                                </button>
                                <button class="btn btn-info btn-large" onclick="showTransactionHistory()">
                                    <i class="fas fa-history"></i> <span data-translate="viewHistory">‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞ ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø</span>
                                </button>
                            </div>
                        </div>

                        <!-- Recent Transactions -->
                        <div class="card" id="recentTransactionsCard">
                            <h3 style="color: var(--primary-color); margin-bottom: 1rem;">
                                <i class="fas fa-list"></i> <span data-translate="recentTransactions">‡∞á‡∞ü‡±Ä‡∞µ‡∞≤‡∞ø ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞≤‡±Å</span>
                            </h3>
                            <div id="recentTransactionsList">
                                <!-- Recent transactions will be loaded here -->
                            </div>
                        </div>

                        <!-- Charts Section --
                        <div class="card" style="grid-column: 1 / -1;">
                            <h3 style="color: var(--primary-color); margin-bottom: 1rem;">
                                <i class="fas fa-chart-bar"></i> <span data-translate="incomeVsExpenses">‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç vs ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å (‡∞ó‡∞§ 6 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å)</span>
                            </h3>
                            <div class="chart-container">
                                <canvas id="incomeExpenseChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Crop Management Section -->
                <div id="crops" class="section hidden">
                    <div class="flex-between mb-3">
                        <h1 style="color: var(--primary-color);">
                            <i class="fas fa-seedling"></i> <span data-translate="cropManagement">‡∞™‡∞Ç‡∞ü ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£</span>
                        </h1>
                        <button class="btn btn-primary btn-large" onclick="showAddCropModal()">
                            <i class="fas fa-plus"></i> <span data-translate="addNewCrop">‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                        </button>
                    </div>

                    <!-- Crop Filters -->
                    <div class="card mb-3">
                        <div class="flex gap-2 flex-wrap">
                            <select id="cropStatusFilter" class="form-control" style="width: auto;" onchange="filterCrops()">
                                <option value="" data-translate="allStatus">‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡±Å‡∞≤‡±Å</option>
                                <option value="active">üå± <span data-translate="active">‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞æ‡∞∂‡±Ä‡∞≤</span></option>
                                <option value="harvested">üåæ <span data-translate="harvested">‡∞ï‡±ã‡∞§ ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø</span></option>
                                <option value="planned">üìÖ <span data-translate="planned">‡∞™‡±ç‡∞∞‡∞£‡∞æ‡∞≥‡∞ø‡∞ï</span></option>
                            </select>
                            <select id="cropSeasonFilter" class="form-control" style="width: auto;" onchange="filterCrops()">
                                <option value="" data-translate="allSeasons">‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞ï‡∞æ‡∞≤‡∞æ‡∞≤‡±Å</option>
                                <option value="1">üåßÔ∏è 1 ‡∞®‡±Ü‡∞≤</option>
                                <option value="2">‚òî 2 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                                <option value="3">üå§Ô∏è 3 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                                <option value="4">‚òÄÔ∏è 4 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                                <option value="5">üåª 5 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                                <option value="6">üåæ 6 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                            </select>
                            <input type="text" id="cropSearchFilter" class="form-control" placeholder="" data-translate-placeholder="searchCrops" style="width: auto;" oninput="filterCrops()">
                        </div>
                    </div>

                    <!-- Crop Grid -->
                    <div id="cropGrid" class="crop-grid">
                        <!-- Crops will be loaded here -->
                    </div>
                </div>

                <!-- Asset Management Section -->
                <div id="assets" class="section hidden">
                    <div class="flex-between mb-3">
                        <h1 style="color: var(--primary-color);">
                            <i class="fas fa-tractor"></i> <span data-translate="assetManagement">‡∞Ü‡∞∏‡±ç‡∞§‡±Å‡∞≤ ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£</span>
                        </h1>
                        <button class="btn btn-primary btn-large" onclick="showAddAssetModal()">
                            <i class="fas fa-plus"></i> <span data-translate="addAsset">‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                        </button>
                    </div>

                    <!-- Asset Categories -->
                    <div class="dashboard-grid mb-3">
                        <div class="card text-center cursor-pointer" onclick="filterAssets('equipment')">
                            <i class="fas fa-tractor text-primary" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <h3 data-translate="equipment">‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å</h3>
                            <p class="text-secondary" id="equipmentCount">0 ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å</p>
                        </div>
                        <div class="card text-center cursor-pointer" onclick="filterAssets('livestock')">
                            <i class="fas fa-horse text-primary" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <h3 data-translate="livestock">‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤‡±Å</h3>
                            <p class="text-secondary" id="livestockCount">0 ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å</p>
                        </div>
                        <div class="card text-center cursor-pointer" onclick="filterAssets('land')">
                            <i class="fas fa-map text-primary" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <h3 data-translate="land">‡∞≠‡±Ç‡∞Æ‡∞ø</h3>
                            <p class="text-secondary" id="landCount">0 ‡∞™‡±ç‡∞≤‡∞æ‡∞ü‡±ç‡∞≤‡±Å</p>
                        </div>
                        <div class="card text-center cursor-pointer" onclick="filterAssets('inventory')">
                            <i class="fas fa-boxes text-primary" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <h3 data-translate="inventory">‡∞≠‡∞Ç‡∞°‡∞æ‡∞∞‡∞Ç</h3>
                            <p class="text-secondary" id="inventoryCount">0 ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å</p>
                        </div>
                    </div>

                    <!-- Asset List -->
                    <div id="assetsList" class="crop-grid">
                        <!-- Assets will be loaded here -->
                    </div>
                </div>

                <!-- Weather Section -->
                <div id="weather" class="section hidden">
                    <h1 style="color: var(--primary-color); margin-bottom: 2rem;">
                        <i class="fas fa-cloud-sun"></i> <span data-translate="weatherInformation">‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç</span>
                    </h1>
                    
                    <!-- Current Location Weather Display -->
                    <div id="currentWeatherDisplay" class="card" style="background: linear-gradient(135deg, #74b9ff, #0984e3, #00cec9); color: white; text-align: center; position: relative; overflow: hidden;">
                        <div style="position: relative; z-index: 1;">
                            <div class="weather-icon" id="currentWeatherIcon" style="font-size: 4rem; margin-bottom: 1rem;">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="weather-temp" id="currentWeatherTemp" style="font-size: 3rem; font-weight: bold; margin-bottom: 0.5rem;">--¬∞C</div>
                            <div class="weather-desc" id="currentWeatherDesc" style="font-size: 1.2rem; margin-bottom: 1rem;">--</div>
                            <div class="current-location" style="color: rgba(255,255,255,0.8); justify-content: center;">
                                <i class="fas fa-map-marker-alt"></i>
                                <span id="weatherLocationName">‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...</span>
                            </div>
                            <div class="weather-details" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                                <div><i class="fas fa-tint"></i><br><span data-translate="humidity">‡∞§‡±á‡∞Æ</span>: <span id="currentWeatherHumidity">--%</span></div>
                                <div><i class="fas fa-wind"></i><br><span data-translate="wind">‡∞ó‡∞æ‡∞≤‡∞ø</span>: <span id="currentWeatherWind">-- km/h</span></div>
                                <div><i class="fas fa-thermometer-half"></i><br><span data-translate="feelsLike">‡∞Ö‡∞®‡±Å‡∞≠‡∞µ‡∞Ç</span>: <span id="currentWeatherFeels">--¬∞C</span></div>
                                <div><i class="fas fa-eye"></i><br><span data-translate="visibility">‡∞¶‡±É‡∞∂‡±ç‡∞Ø‡∞§</span>: <span id="currentWeatherVisibility">-- km</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- 5-Day Weather Forecast -->
                    <div class="card mt-3">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">
                            <i class="fas fa-calendar-alt"></i> <span data-translate="fiveDayForecast">5 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤ ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ</span>
                        </h3>
                        <div id="weatherForecast" class="weather-forecast" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem;">
                            <!-- 5-day forecast will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Ideas Section -->
                <div id="ideas" class="section hidden">
                    <h1 style="color: var(--primary-color); margin-bottom: 2rem;">
                        <i class="fas fa-lightbulb"></i> <span data-translate="smartFarmIdeas">‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å</span>
                    </h1>
                    
                    <div class="ideas-grid">
                        <!-- Crop Suggestions -->
                        <div class="card idea-card">
                            <div class="idea-category">‡∞™‡∞Ç‡∞ü ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</div>
                            <i class="fas fa-seedling idea-icon" style="color: var(--success-color);"></i>
                            <h3 class="idea-title">‡∞ï‡∞æ‡∞≤‡∞æ‡∞®‡±Å‡∞ï‡±Ç‡∞≤ ‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞™‡∞ø‡∞ï</h3>
                            <p class="idea-description">‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡±Å‡∞≤ ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞≤‡∞æ‡∞≠‡∞¶‡∞æ‡∞Ø‡∞ï‡∞Æ‡±à‡∞® ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å</p>
                            <ul class="idea-benefits">
                                <li>‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Ö‡∞®‡±Å‡∞ó‡±Å‡∞£‡∞Ç‡∞ó‡∞æ ‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞™‡∞ø‡∞ï</li>
                                <li>‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞°‡∞ø‡∞Æ‡∞æ‡∞Ç‡∞°‡±ç ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</li>
                                <li>‡∞Æ‡±Ä ‡∞≠‡±Ç‡∞Æ‡∞ø‡∞ï‡∞ø ‡∞Ö‡∞®‡±Å‡∞ï‡±Ç‡∞≤‡∞Æ‡±à‡∞® ‡∞∞‡∞ï‡∞æ‡∞≤‡±Å</li>
                                <li>‡∞µ‡±á‡∞∞‡±Å‡∞∂‡±Ü‡∞®‡∞ó ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞ö‡±Ü‡∞∞‡±Å‡∞ï‡±Å ‡∞Æ‡∞ß‡±ç‡∞Ø ‡∞Æ‡∞ø‡∞∂‡±ç‡∞∞‡∞Æ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞Ç</li>
                            </ul>
                            <button class="btn btn-primary" onclick="showCropSuggestions()">
                                <i class="fas fa-arrow-right"></i> ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø
                            </button>
                        </div>

                        <!-- Government Schemes -->
                        <div class="card idea-card">
                            <div class="idea-category">‡∞™‡±ç‡∞∞‡∞≠‡±Å‡∞§‡±ç‡∞µ ‡∞™‡∞•‡∞ï‡∞æ‡∞≤‡±Å</div>
                            <i class="fas fa-university idea-icon" style="color: var(--info-color);"></i>
                            <h3 class="idea-title">‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞∏‡∞¨‡±ç‡∞∏‡∞ø‡∞°‡±Ä‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∞‡±Å‡∞£‡∞æ‡∞≤‡±Å</h3>
                            <p class="idea-description">‡∞Æ‡±Ä‡∞ï‡±Å ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã‡∞®‡∞ø ‡∞™‡±ç‡∞∞‡∞≠‡±Å‡∞§‡±ç‡∞µ ‡∞™‡∞•‡∞ï‡∞æ‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∞‡±Å‡∞£ ‡∞∏‡±å‡∞ï‡∞∞‡±ç‡∞Ø‡∞æ‡∞≤‡±Å</p>
                            <ul class="idea-benefits">
                                <li>PM-KISAN ‡∞™‡∞•‡∞ï‡∞Ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‚Çπ6000 ‡∞µ‡∞æ‡∞∞‡±ç‡∞∑‡∞ø‡∞ï ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç</li>
                                <li>‡∞ï‡±ç‡∞∞‡∞æ‡∞™‡±ç ‡∞á‡∞®‡±ç‡∞∑‡±Å‡∞∞‡±Ü‡∞®‡±ç‡∞∏‡±ç ‡∞∏‡±å‡∞ï‡∞∞‡±ç‡∞Ø‡∞æ‡∞≤‡±Å</li>
                                <li>‡∞ï‡∞ø‡∞∏‡∞æ‡∞®‡±ç ‡∞ï‡±ç‡∞∞‡±Ü‡∞°‡∞ø‡∞ü‡±ç ‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±ç ‡∞¶‡∞∞‡∞ñ‡∞æ‡∞∏‡±ç‡∞§‡±Å</li>
                                <li>‡∞∏‡∞¨‡±ç‡∞∏‡∞ø‡∞°‡±Ä ‡∞∞‡±á‡∞ü‡±ç‡∞≤‡∞≤‡±ã ‡∞ó‡±Å‡∞°‡±ç‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å</li>
                            </ul>
                            <button class="btn btn-info" onclick="showGovernmentSchemes()">
                                <i class="fas fa-external-link-alt"></i> ‡∞¶‡∞∞‡∞ñ‡∞æ‡∞∏‡±ç‡∞§‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
                            </button>
                        </div>

                        <!-- Smart Farming Techniques -->
                        <div class="card idea-card">
                            <div class="idea-category">‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞ü‡±Ü‡∞ï‡±ç‡∞®‡∞ø‡∞ï‡±ç</div>
                            <i class="fas fa-robot idea-icon" style="color: var(--accent-color);"></i>
                            <h3 class="idea-title">‡∞Ü‡∞ß‡±Å‡∞®‡∞ø‡∞ï ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡±Å‡∞≤‡±Å</h3>
                            <p class="idea-description">‡∞∏‡∞æ‡∞Ç‡∞ï‡±á‡∞§‡∞ø‡∞ï‡∞§ ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞ø‡∞§ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡±Å‡∞≤‡±Å ‡∞Ö‡∞ß‡∞ø‡∞ï ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø ‡∞ï‡±ã‡∞∏‡∞Ç</p>
                            <ul class="idea-benefits">
                                <li>‡∞°‡±ç‡∞∞‡∞ø‡∞™‡±ç ‡∞á‡∞∞‡∞ø‡∞ó‡±á‡∞∑‡∞®‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡±ç‡∞•</li>
                                <li>‡∞∏‡±ã‡∞Ø‡∞ø‡∞≤‡±ç ‡∞π‡±Ü‡∞≤‡±ç‡∞§‡±ç ‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±ç ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å</li>
                                <li>‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞Ö‡∞™‡±ç‡∞°‡±á‡∞ü‡±ç‡∞∏‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ö‡∞≤‡∞∞‡±ç‡∞ü‡±ç‡∞∏‡±ç</li>
                                <li>‡∞Ü‡∞∞‡±ç‡∞ó‡∞æ‡∞®‡∞ø‡∞ï‡±ç ‡∞´‡∞æ‡∞∞‡±ç‡∞Æ‡∞ø‡∞Ç‡∞ó‡±ç ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</li>
                            </ul>
                            <button class="btn btn-warning" onclick="showSmartFarmingTips()">
                                <i class="fas fa-play"></i> ‡∞µ‡±Ä‡∞°‡∞ø‡∞Ø‡±ã ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø
                            </button>
                        </div>

                        <!-- Market Intelligence -->
                        <div class="card idea-card">
                            <div class="idea-category">‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç</div>
                            <i class="fas fa-chart-line idea-icon" style="color: var(--primary-color);"></i>
                            <h3 class="idea-title">‡∞™‡∞Ç‡∞ü‡∞≤ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞ß‡∞∞‡∞≤‡±Å</h3>
                            <p class="idea-description">‡∞∞‡±Ä‡∞Ø‡∞≤‡±ç ‡∞ü‡±à‡∞Æ‡±ç ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞ß‡∞∞‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞Ç ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞â‡∞§‡±ç‡∞§‡∞Æ ‡∞∏‡∞Æ‡∞Ø‡∞Ç</p>
                            <ul class="idea-benefits">
                                <li>‡∞Æ‡∞Ç‡∞°‡±Ä ‡∞ß‡∞∞‡∞≤ ‡∞∞‡±ã‡∞ú‡±Å‡∞µ‡∞æ‡∞∞‡±Ä ‡∞Ö‡∞™‡±ç‡∞°‡±á‡∞ü‡±ç‡∞∏‡±ç</li>
                                <li>‡∞Ö‡∞§‡±ç‡∞Ø‡∞ß‡∞ø‡∞ï ‡∞ß‡∞∞ ‡∞≤‡∞≠‡∞ø‡∞Ç‡∞ö‡±á ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç‡∞≤‡±Å</li>
                                <li>‡∞∞‡∞µ‡∞æ‡∞£‡∞æ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞§‡±ã ‡∞≤‡∞æ‡∞≠‡∞Ç ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤‡±Å</li>
                                <li>‡∞≠‡∞µ‡∞ø‡∞∑‡±ç‡∞Ø‡∞§‡±ç ‡∞ß‡∞∞‡∞≤ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ‡∞≤‡±Å</li>
                            </ul>
                            <button class="btn btn-success" onclick="showMarketPrices()">
                                <i class="fas fa-rupee-sign"></i> ‡∞ß‡∞∞‡∞≤‡±Å ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø
                            </button>
                        </div>

                        <!-- Financial Planning -->
                        <div class="card idea-card">
                            <div class="idea-category">‡∞Ü‡∞∞‡±ç‡∞•‡∞ø‡∞ï ‡∞™‡±ç‡∞∞‡∞£‡∞æ‡∞≥‡∞ø‡∞ï</div>
                            <i class="fas fa-calculator idea-icon" style="color: var(--success-color);"></i>
                            <h3 class="idea-title">‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞¨‡∞°‡±ç‡∞ú‡±Ü‡∞ü‡±ç ‡∞Æ‡±á‡∞®‡±á‡∞ú‡±ç‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç</h3>
                            <p class="idea-description">‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡∞®‡±Å ‡∞§‡∞ó‡±ç‡∞ó‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞≤‡∞æ‡∞≠‡∞æ‡∞≤‡∞®‡±Å ‡∞™‡±Ü‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞™‡±ç‡∞≤‡∞æ‡∞®‡∞ø‡∞Ç‡∞ó‡±ç</p>
                            <ul class="idea-benefits">
                                <li>‡∞™‡∞Ç‡∞ü ‡∞µ‡∞æ‡∞∞ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ</li>
                                <li>‡∞≤‡∞æ‡∞≠‡∞¶‡∞æ‡∞Ø‡∞ï‡∞§ ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£</li>
                                <li>‡∞∞‡±Å‡∞£ ‡∞Æ‡±á‡∞®‡±á‡∞ú‡±ç‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</li>
                                <li>‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç ‡∞µ‡±à‡∞µ‡∞ø‡∞ß‡±ç‡∞Ø‡±Ä‡∞ï‡∞∞‡∞£ ‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å</li>
                            </ul>
                            <button class="btn btn-primary" onclick="showBudgetPlanner()">
                                <i class="fas fa-chart-pie"></i> ‡∞™‡±ç‡∞≤‡∞æ‡∞®‡∞∞‡±ç ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                            </button>
                        </div>

                        <!-- Admin Suggestions (if admin features are implemented) -->
                        <div class="card idea-card">
                            <div class="idea-category">‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡±á‡∞ï ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</div>
                            <i class="fas fa-user-tie idea-icon" style="color: var(--error-color);"></i>
                            <h3 class="idea-title">‡∞®‡∞ø‡∞™‡±Å‡∞£‡±Å‡∞≤ ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</h3>
                            <p class="idea-description">‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞®‡∞ø‡∞™‡±Å‡∞£‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ö‡∞®‡±Å‡∞≠‡∞µ‡∞ú‡±ç‡∞û‡±Å‡∞≤‡±Å ‡∞á‡∞ö‡±ç‡∞ö‡±á ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</p>
                            <ul class="idea-benefits">
                                <li>‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞∂‡∞æ‡∞∏‡±ç‡∞§‡±ç‡∞∞‡∞µ‡±á‡∞§‡±ç‡∞§‡∞≤ ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å</li>
                                <li>‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞ø‡∞ï ‡∞Ö‡∞®‡±Å‡∞≠‡∞µ‡∞ú‡±ç‡∞û‡±Å‡∞≤ ‡∞ö‡∞ø‡∞ü‡±ç‡∞ï‡∞æ‡∞≤‡±Å</li>
                                <li>‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞∏‡∞æ‡∞Ç‡∞ï‡±á‡∞§‡∞ø‡∞ï‡∞§‡∞≤ ‡∞™‡∞∞‡∞ø‡∞ö‡∞Ø‡∞Ç</li>
                                <li>‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞ï‡±Ä‡∞ü‡∞ï‡∞æ‡∞≤ ‡∞®‡∞ø‡∞µ‡∞æ‡∞∞‡∞£</li>
                            </ul>
                            <button class="btn btn-error" onclick="showExpertAdvice()">
                                <i class="fas fa-comments"></i> ‡∞®‡∞ø‡∞™‡±Å‡∞£‡±Å‡∞≤‡∞§‡±ã ‡∞Æ‡∞æ‡∞ü‡±ç‡∞≤‡∞æ‡∞°‡∞Ç‡∞°‡∞ø
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Profile & Settings Section -->
                <div id="profile" class="section hidden">
                    <h1 style="color: var(--primary-color); margin-bottom: 2rem;">
                        <i class="fas fa-user-cog"></i> <span data-translate="profileSettings">‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç & ‡∞∏‡±Ü‡∞ü‡±ç‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç‡∞∏‡±ç</span>
                    </h1>
                    
                    <div class="dashboard-grid">
                        <!-- Profile Information -->
                        <div class="card">
                            <h3><i class="fas fa-user"></i> <span data-translate="profileInformation">‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç</span></h3>
                            <form id="profileForm">
                                <div class="form-group">
                                    <label for="profileName" data-translate="fullName">‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞™‡±á‡∞∞‡±Å</label>
                                    <input type="text" id="profileName" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="profileEmail" data-translate="email">‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç</label>
                                    <input type="email" id="profileEmail" class="form-control" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="profilePhone" data-translate="phone">‡∞´‡±ã‡∞®‡±ç</label>
                                    <input type="tel" id="profilePhone" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="profileLocation" data-translate="location">‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç</label>
                                    <input type="text" id="profileLocation" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="profileFarmSize" data-translate="farmSizeAcres">‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞≠‡±Ç‡∞Æ‡∞ø (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å)</label>
                                    <input type="number" id="profileFarmSize" class="form-control" step="0.1">
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> <span data-translate="updateProfile">‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç ‡∞®‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                                </button>
                            </form>
                        </div>

                        <!-- App Settings -->
                        <div class="card">
                            <h3><i class="fas fa-cog"></i> <span data-translate="appSettings">‡∞Ø‡∞æ‡∞™‡±ç ‡∞∏‡±Ü‡∞ü‡±ç‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç‡∞∏‡±ç</span></h3>
                            <div class="form-group">
                                <label data-translate="theme">‡∞•‡±Ä‡∞Æ‡±ç</label>
                                <div class="flex gap-2">
                                    <button class="btn btn-secondary" onclick="setTheme('light')">
                                        <i class="fas fa-sun"></i> <span data-translate="light">‡∞ï‡∞æ‡∞Ç‡∞§‡∞ø</span>
                                    </button>
                                    <button class="btn btn-secondary" onclick="setTheme('dark')">
                                        <i class="fas fa-moon"></i> <span data-translate="dark">‡∞ö‡±Ä‡∞ï‡∞ü‡∞ø</span>
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="settingsLanguage" data-translate="language">‡∞≠‡∞æ‡∞∑</label>
                                <select id="settingsLanguage" class="form-control" onchange="changeLanguage(this.value)">
                                    <option value="te">üáÆüá≥ ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                                    <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                                    <option value="en">üá∫üá∏ English</option>
                                </select>
                            </div>
                        </div>

                        <!-- Data Management -->
                        <div class="card">
                            <h3><i class="fas fa-database"></i> <span data-translate="dataManagement">‡∞°‡±á‡∞ü‡∞æ ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£</span></h3>
                            <div class="flex-column gap-2">
                                <button class="btn btn-primary" onclick="exportAllData()">
                                    <i class="fas fa-download"></i> <span data-translate="exportData">‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞°‡±á‡∞ü‡∞æ‡∞®‡±Å ‡∞é‡∞ó‡±Å‡∞Æ‡∞§‡∞ø ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (PDF)</span>
                                </button>
                                <button class="btn btn-secondary" onclick="backupData()">
                                    <i class="fas fa-cloud-upload-alt"></i> <span data-translate="backupToCloud">‡∞ï‡±ç‡∞≤‡±å‡∞°‡±ç‚Äå‡∞ï‡±Å ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ï‡∞™‡±ç</span>
                                </button>
                                <button class="btn btn-error" onclick="clearAllData()">
                                    <i class="fas fa-trash"></i> <span data-translate="clearAllData">‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞°‡±á‡∞ü‡∞æ‡∞®‡±Å ‡∞ï‡±ç‡∞≤‡∞ø‡∞Ø‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <div class="mobile-nav-items">
                <a href="#" onclick="showSection('dashboard')" class="mobile-nav-item active">
                    <i class="fas fa-tachometer-alt"></i>
                    <span data-translate="dashboard">‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç</span>
                </a>
                <a href="#" onclick="showSection('crops')" class="mobile-nav-item">
                    <i class="fas fa-seedling"></i>
                    <span data-translate="crops">‡∞™‡∞Ç‡∞ü‡∞≤‡±Å</span>
                </a>
                <a href="#" onclick="showSection('assets')" class="mobile-nav-item">
                    <i class="fas fa-tractor"></i>
                    <span data-translate="assets">‡∞Ü‡∞∏‡±ç‡∞§‡±Å‡∞≤‡±Å</span>
                </a>
                <a href="#" onclick="showSection('weather')" class="mobile-nav-item">
                    <i class="fas fa-cloud-sun"></i>
                    <span data-translate="weather">‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç</span>
                </a>
                <a href="#" onclick="showSection('ideas')" class="mobile-nav-item">
                    <i class="fas fa-lightbulb"></i>
                    <span data-translate="ideas">‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å</span>
                </a>
            </div>
        </nav>

        <!-- Floating Action Button --
        <button class="fab" id="fabButton" onclick="showQuickActions()" data-title="Quick Actions">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <!-- Modals -->
    <!-- Add Crop Modal -->
    <div id="addCropModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-seedling"></i> <span data-translate="addNewCrop">‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                </h2>
                <button class="close-modal" onclick="closeModal('addCropModal')">&times;</button>
            </div>
            <form id="addCropForm">
                <!-- Crop Image Upload -->
                <div class="image-upload-container">
                    <label for="cropImageInput" class="crop-image-preview" id="cropImagePreview">
                        <i class="fas fa-camera"></i>
                    </label>
                    <input type="file" id="cropImageInput" class="image-upload-input" accept="image/*" onchange="previewCropImage(this)">
                    <small style="color: var(--text-secondary);">‡∞™‡∞Ç‡∞ü ‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</small>
                </div>

                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="cropName" data-translate="cropName">üå± ‡∞™‡∞Ç‡∞ü ‡∞™‡±á‡∞∞‡±Å</label>
                        <select id="cropName" class="form-control" required onchange="updateCropImage()">
                            <option value="" data-translate="selectCrop">‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
                            <option value="rice">üåæ ‡∞µ‡∞∞‡∞ø / Rice / ‡§ö‡§æ‡§µ‡§≤</option>
                            <option value="wheat">üåæ ‡∞ó‡±ã‡∞ß‡±Å‡∞Æ / Wheat / ‡§ó‡•á‡§π‡•Ç‡§Ç</option>
                            <option value="corn">üåΩ ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞® / Corn / ‡§Æ‡§ï‡•ç‡§ï‡§æ</option>
                            <option value="tobacco">üö¨ ‡∞™‡±ä‡∞ó‡∞æ‡∞ï‡±Å / Tobacco / ‡§§‡§Ç‡§¨‡§æ‡§ï‡•Ç</option>
                            <option value="cotton">üåø ‡∞™‡∞§‡±ç‡∞§‡∞ø / Cotton / ‡§ï‡§™‡§æ‡§∏</option>
                            <option value="sugarcane">üéã ‡∞ö‡±Ü‡∞∞‡±Å‡∞ï‡±Å / Sugarcane / ‡§ó‡§®‡•ç‡§®‡§æ</option>
                            <option value="pulses">ü´ò ‡∞™‡∞™‡±ç‡∞™‡±Å‡∞≤‡±Å / Pulses / ‡§¶‡§æ‡§≤</option>
                            <option value="vegetables">ü•ï ‡∞ï‡±Ç‡∞∞‡∞ó‡∞æ‡∞Ø‡∞≤‡±Å / Vegetables / ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡§æ‡§Ç</option>
                            <option value="fruits">üçé ‡∞™‡∞Ç‡∞°‡±ç‡∞≤‡±Å / Fruits / ‡§´‡§≤</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cropVariety" data-translate="variety">üåø ‡∞∞‡∞ï‡∞Ç</label>
                        <input type="text" id="cropVariety" class="form-control" placeholder="‡∞â‡∞¶‡∞æ: ‡∞¨‡∞æ‡∞∏‡±ç‡∞Æ‡∞§‡∞ø, ‡∞π‡±à‡∞¨‡±ç‡∞∞‡∞ø‡∞°‡±ç">
                    </div>
                </div>

                <!-- Area Selection with Slider -->
                <div class="form-group">
                    <label for="cropAreaSlider" data-translate="areaAcres">üìè ‡∞µ‡±à‡∞∂‡∞æ‡∞≤‡±ç‡∞Ø‡∞Ç (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å)</label>
                    <div class="range-container">
                        <input type="range" id="cropAreaSlider" class="range-slider" min="0.1" max="10" step="0.1" value="1" oninput="updateAreaValue(this.value)">
                        <div class="range-value" id="areaValue">1.0 ‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å</div>
                    </div>
                    <div class="custom-area-input" id="customAreaInput">
                        <input type="number" id="cropAreaCustom" class="form-control" step="0.1" placeholder="‡∞ï‡∞∏‡±ç‡∞ü‡∞Æ‡±ç ‡∞µ‡±à‡∞∂‡∞æ‡∞≤‡±ç‡∞Ø‡∞Ç ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø" oninput="updateSliderFromInput(this.value)">
                    </div>
                    <label>
                        <input type="checkbox" id="useCustomArea" onchange="toggleCustomArea()"> 10+ ‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å (‡∞ï‡∞∏‡±ç‡∞ü‡∞Æ‡±ç ‡∞á‡∞®‡±ç‚Äå‡∞™‡±Å‡∞ü‡±ç)
                    </label>
                </div>

                <div class="grid grid-3 gap-2">
                    <div class="form-group">
                        <label for="cropSeason" data-translate="durationMonths">‚è±Ô∏è ‡∞µ‡±ç‡∞Ø‡∞µ‡∞ß‡∞ø (‡∞®‡±Ü‡∞≤‡∞≤‡±Å)</label>
                        <select id="cropSeason" class="form-control" required>
                            <option value="" data-translate="selectDuration">‡∞µ‡±ç‡∞Ø‡∞µ‡∞ß‡∞ø‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
                            <option value="1">1 ‡∞®‡±Ü‡∞≤</option>
                            <option value="2">2 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                            <option value="3">3 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                            <option value="4">4 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                            <option value="5">5 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                            <option value="6">6 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sowingDate" data-translate="sowingDate">üìÖ ‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤ ‡∞§‡±á‡∞¶‡±Ä</label>
                        <input type="date" id="sowingDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="expectedHarvest" data-translate="expectedHarvest">üåæ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞ï‡±ã‡∞§ ‡∞§‡±á‡∞¶‡±Ä</label>
                        <input type="date" id="expectedHarvest" class="form-control" required readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label for="cropLocation" data-translate="location">üìç ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç</label>
                    <input type="text" id="cropLocation" class="form-control" placeholder="‡∞™‡±ä‡∞≤‡∞Ç ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç" required>
                </div>

                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="expectedYield" data-translate="expectedYield">‚öñÔ∏è ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø (‡∞ü‡∞®‡±ç‡∞≤‡±Å)</label>
                        <input type="number" id="expectedYield" class="form-control" step="0.1" placeholder="0.0">
                    </div>
                    <div class="form-group">
                        <label for="expectedPrice" data-translate="expectedPrice">üí∞ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞ß‡∞∞ (‚Çπ/‡∞ü‡∞®‡±ç)</label>
                        <input type="number" id="expectedPrice" class="form-control" placeholder="0">
                    </div>
                </div>

                <div class="form-group">
                    <label for="cropNotes" data-translate="notes">üìù ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</label>
                    <textarea id="cropNotes" class="form-control" rows="3" placeholder="‡∞à ‡∞™‡∞Ç‡∞ü ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞Ö‡∞¶‡∞®‡∞™‡±Å ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç..."></textarea>
                </div>

                <div class="flex gap-2">
                    <button type="submit" class="btn btn-primary btn-large">
                        <i class="fas fa-save"></i> <span data-translate="addCrop">‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addCropModal')">
                        <i class="fas fa-times"></i> <span data-translate="cancel">‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div id="addTransactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-plus-circle"></i> <span data-translate="addTransaction">‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                </h2>
                <button class="close-modal" onclick="closeModal('addTransactionModal')">&times;</button>
            </div>
            <form id="addTransactionForm">
                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="transactionType" data-translate="type">üí∞ ‡∞∞‡∞ï‡∞Ç</label>
                        <select id="transactionType" class="form-control" required onchange="updateTransactionCategories()">
                            <option value="" data-translate="selectType">‡∞∞‡∞ï‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
                            <option value="income">üí∞ ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç / Income / ‡§Ü‡§Ø</option>
                            <option value="expense">üí≥ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å / Expense / ‡§ñ‡§∞‡•ç‡§ö</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transactionCategory" data-translate="category">üè∑Ô∏è ‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç</label>
                        <select id="transactionCategory" class="form-control" required>
                            <option value="" data-translate="selectCategory">‡∞µ‡∞∞‡±ç‡∞ó‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="transactionDescription" data-translate="description">üìù ‡∞µ‡∞ø‡∞µ‡∞∞‡∞£</label>
                    <input type="text" id="transactionDescription" class="form-control" required placeholder="‡∞∏‡∞Ç‡∞ï‡±ç‡∞∑‡∞ø‡∞™‡±ç‡∞§ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞£">
                </div>
                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="transactionAmount" data-translate="amount">üí∞ ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç (‚Çπ)</label>
                        <input type="number" id="transactionAmount" class="form-control" step="0.01" required placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="transactionDate" data-translate="date">üìÖ ‡∞§‡±á‡∞¶‡±Ä</label>
                        <input type="date" id="transactionDate" class="form-control" required>
                    </div>
                </div>
                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="transactionPaymentMethod" data-translate="paymentMethod">üí≥ ‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞™‡±Å ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡∞ø</label>
                        <select id="transactionPaymentMethod" class="form-control">
                            <option value="cash">üíµ ‡∞®‡∞ó‡∞¶‡±Å</option>
                            <option value="bank_transfer">üè¶ ‡∞¨‡±ç‡∞Ø‡∞æ‡∞Ç‡∞ï‡±Å ‡∞¨‡∞¶‡∞ø‡∞≤‡±Ä</option>
                            <option value="check">üìÑ ‡∞ö‡±Ü‡∞ï‡±ç</option>
                            <option value="digital">üì± ‡∞°‡∞ø‡∞ú‡∞ø‡∞ü‡∞≤‡±ç ‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞™‡±Å</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transactionCropId" data-translate="relatedCrop">üå± ‡∞∏‡∞Ç‡∞¨‡∞Ç‡∞ß‡∞ø‡∞§ ‡∞™‡∞Ç‡∞ü (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</label>
                        <select id="transactionCropId" class="form-control">
                            <option value="" data-translate="selectCrop">‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="transactionContact" data-translate="contactNumber">üìû ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞™‡±Å ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</label>
                    <input type="tel" id="transactionContact" class="form-control" placeholder="+91 XXXXXXXXXX">
                </div>
                <div class="form-group">
                    <label for="transactionNotes" data-translate="notes">üìù ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</label>
                    <textarea id="transactionNotes" class="form-control" rows="2" placeholder="‡∞Ö‡∞¶‡∞®‡∞™‡±Å ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å..."></textarea>
                </div>
                <div class="flex gap-2">
                    <button type="submit" class="btn btn-primary btn-large">
                        <i class="fas fa-save"></i> <span data-translate="addTransaction">‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addTransactionModal')">
                        <i class="fas fa-times"></i> <span data-translate="cancel">‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Harvest Modal -->
    <div id="harvestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-cut"></i> <span data-translate="harvestCrop">‡∞™‡∞Ç‡∞ü ‡∞ï‡±ã‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                </h2>
                <button class="close-modal" onclick="closeModal('harvestModal')">&times;</button>
            </div>
            <form id="harvestForm">
                <input type="hidden" id="harvestCropId">
                
                <!-- Confirmation Message -->
                <div style="background: rgba(255, 193, 7, 0.1); border: 2px solid var(--warning-color); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; text-align: center;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: var(--warning-color); margin-bottom: 0.5rem;"></i>
                    <h3 style="color: var(--warning-color); margin-bottom: 0.5rem;">‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞£</h3>
                    <p style="color: var(--text-secondary);">‡∞Æ‡±Ä‡∞∞‡±Å ‡∞à ‡∞™‡∞Ç‡∞ü‡∞®‡±Å ‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞®‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ö‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ? ‡∞à ‡∞ö‡∞∞‡±ç‡∞Ø ‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞¶‡±Å.</p>
                </div>

                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="harvestQuantity" data-translate="harvestQuantity">‚öñÔ∏è ‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç</label>
                        <input type="number" id="harvestQuantity" class="form-control" step="0.1" required placeholder="0.0">
                    </div>
                    <div class="form-group">
                        <label for="harvestUnit" data-translate="unit">üì¶ ‡∞Ø‡±Ç‡∞®‡∞ø‡∞ü‡±ç</label>
                        <select id="harvestUnit" class="form-control" required>
                            <option value="quintals">‡∞ï‡±ç‡∞µ‡∞ø‡∞Ç‡∞ü‡∞≤‡±ç‡∞∏‡±ç</option>
                            <option value="bags">‡∞∏‡∞Ç‡∞ö‡±Å‡∞≤‡±Å</option>
                            <option value="tons">‡∞ü‡∞®‡±ç‡∞≤‡±Å</option>
                            <option value="kg">‡∞ï‡∞ø‡∞≤‡±ã‡∞≤‡±Å</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="pricePerUnit" data-translate="pricePerUnit">üí∞ ‡∞Ø‡±Ç‡∞®‡∞ø‡∞ü‡±ç‚Äå‡∞ï‡±Å ‡∞ß‡∞∞ (‚Çπ)</label>
                        <input type="number" id="pricePerUnit" class="form-control" step="0.01" required placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="totalSaleAmount" data-translate="totalSaleAmount">üí∞ ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞™‡±Å ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç (‚Çπ)</label>
                        <input type="number" id="totalSaleAmount" class="form-control" step="0.01" readonly style="background: rgba(76, 175, 80, 0.1); color: var(--success-color); font-weight: bold;">
                    </div>
                </div>
                <div class="form-group">
                    <label for="buyerContact" data-translate="buyerContact">üìû ‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å‡∞¶‡∞æ‡∞∞‡±Å ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞™‡±Å (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</label>
                    <input type="tel" id="buyerContact" class="form-control" placeholder="+91 XXXXXXXXXX">
                </div>
                <div class="form-group">
                    <label for="harvestNotes" data-translate="notes">üìù ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</label>
                    <textarea id="harvestNotes" class="form-control" rows="2" placeholder="‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å, ‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å‡∞¶‡∞æ‡∞∞‡±Å ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç, ‡∞Æ‡±ä‡∞¶‡∞≤‡±à‡∞®‡∞µ‡∞ø..."></textarea>
                </div>
                <div class="flex gap-2">
                    <button type="submit" class="btn btn-success btn-large">
                        <i class="fas fa-check"></i> <span data-translate="completeHarvest">‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('harvestModal')">
                        <i class="fas fa-times"></i> <span data-translate="cancel">‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Asset Modal -->
    <div id="addAssetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-plus-square"></i> <span data-translate="addAsset">‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                </h2>
                <button class="close-modal" onclick="closeModal('addAssetModal')">&times;</button>
            </div>
            <form id="addAssetForm">
                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="assetType" data-translate="assetType">üè∑Ô∏è ‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞∞‡∞ï‡∞Ç</label>
                        <select id="assetType" class="form-control" required onchange="updateAssetFields()">
                            <option value="" data-translate="selectType">‡∞∞‡∞ï‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
                            <option value="equipment">üöú ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å / Equipment / ‡§â‡§™‡§ï‡§∞‡§£</option>
                            <option value="livestock">üêÑ ‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤‡±Å / Livestock / ‡§™‡§∂‡•Å‡§ß‡§®</option>
                            <option value="land">üåæ ‡∞≠‡±Ç‡∞Æ‡∞ø / Land / ‡§≠‡•Ç‡§Æ‡§ø</option>
                            <option value="inventory">üì¶ ‡∞≠‡∞Ç‡∞°‡∞æ‡∞∞‡∞Ç / Inventory / ‡§≠‡§Ç‡§°‡§æ‡§∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="assetName" data-translate="name">üìù ‡∞™‡±á‡∞∞‡±Å</label>
                        <input type="text" id="assetName" class="form-control" required placeholder="‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞™‡±á‡∞∞‡±Å">
                    </div>
                </div>
                <div class="grid grid-2 gap-2">
                    <div class="form-group">
                        <label for="assetPurchaseDate" data-translate="purchaseDate">üìÖ ‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å ‡∞§‡±á‡∞¶‡±Ä</label>
                        <input type="date" id="assetPurchaseDate" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="assetPurchasePrice" data-translate="purchasePrice">üí∞ ‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å ‡∞ß‡∞∞ (‚Çπ)</label>
                        <input type="number" id="assetPurchasePrice" class="form-control" step="0.01" placeholder="0.00">
                    </div>
                </div>

                <!-- Equipment Fields -->
                <div id="equipmentFields" class="hidden">
                    <div class="grid grid-2 gap-2">
                        <div class="form-group">
                            <label for="equipmentCondition" data-translate="condition">üîß ‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø</label>
                            <select id="equipmentCondition" class="form-control">
                                <option value="excellent">‚≠ê ‡∞Ö‡∞¶‡±ç‡∞≠‡±Å‡∞§‡∞Æ‡±à‡∞®</option>
                                <option value="good">üëç ‡∞Æ‡∞Ç‡∞ö‡∞ø</option>
                                <option value="fair">üÜó ‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£</option>
                                <option value="poor">üëé ‡∞ö‡±Ü‡∞°‡±Å</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="equipmentMaintenanceCost" data-translate="annualMaintenance">üí∞ ‡∞µ‡∞æ‡∞∞‡±ç‡∞∑‡∞ø‡∞ï ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ (‚Çπ)</label>
                            <input type="number" id="equipmentMaintenanceCost" class="form-control" step="0.01" placeholder="0.00">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="equipmentWorkHours" data-translate="workHoursPerDay">‚è±Ô∏è ‡∞∞‡±ã‡∞ú‡±Å‡∞ï‡±Å ‡∞™‡∞®‡∞ø ‡∞ó‡∞Ç‡∞ü‡∞≤‡±Å</label>
                        <input type="number" id="equipmentWorkHours" class="form-control" step="0.5" placeholder="8">
                    </div>
                </div>

                <!-- Livestock Fields -->
                <div id="livestockFields" class="hidden">
                    <div class="grid grid-3 gap-2">
                        <div class="form-group">
                            <label for="animalCount" data-translate="count">üî¢ ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï</label>
                            <input type="number" id="animalCount" class="form-control" placeholder="1">
                        </div>
                        <div class="form-group">
                            <label for="animalBreed" data-translate="breed">üêÑ ‡∞ú‡∞æ‡∞§‡∞ø</label>
                            <input type="text" id="animalBreed" class="form-control" placeholder="‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤ ‡∞ú‡∞æ‡∞§‡∞ø">
                        </div>
                        <div class="form-group">
                            <label for="animalHealth" data-translate="healthStatus">üíö ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø</label>
                            <select id="animalHealth" class="form-control">
                                <option value="healthy">üíö ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç‡∞ó‡∞æ</option>
                                <option value="sick">ü§í ‡∞Ö‡∞®‡∞æ‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç</option>
                                <option value="recovering">üîÑ ‡∞ï‡±ã‡∞≤‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±ã‡∞Ç‡∞¶‡∞ø</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-2 gap-2">
                        <div class="form-group">
                            <label for="milkProduction" data-translate="dailyMilkProduction">ü•õ ‡∞¶‡±à‡∞®‡∞ø‡∞ï ‡∞™‡∞æ‡∞≤ ‡∞â‡∞§‡±ç‡∞™‡∞æ‡∞¶‡∞® (‡∞≤‡±Ä‡∞ü‡∞∞‡±ç‡∞≤‡±Å)</label>
                            <input type="number" id="milkProduction" class="form-control" step="0.1" placeholder="0.0">
                        </div>
                        <div class="form-group">
                            <label for="feedCostDaily" data-translate="dailyFeedCost">üåæ ‡∞¶‡±à‡∞®‡∞ø‡∞ï ‡∞Ü‡∞π‡∞æ‡∞∞ ‡∞ß‡∞∞ (‚Çπ)</label>
                            <input type="number" id="feedCostDaily" class="form-control" step="0.01" placeholder="0.00">
                        </div>
                    </div>
                </div>

                <!-- Land Fields -->
                <div id="landFields" class="hidden">
                    <div class="grid grid-2 gap-2">
                        <div class="form-group">
                            <label for="landSize" data-translate="sizeAcres">üìè ‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å)</label>
                            <input type="number" id="landSize" class="form-control" step="0.1" placeholder="0.0">
                        </div>
                        <div class="form-group">
                            <label for="landType" data-translate="landType">üè† ‡∞≠‡±Ç‡∞Æ‡∞ø ‡∞∞‡∞ï‡∞Ç</label>
                            <select id="landType" class="form-control">
                                <option value="owned">üè† ‡∞∏‡±ç‡∞µ‡∞Ç‡∞§‡∞Ç</option>
                                <option value="leased">üìÑ ‡∞≤‡±Ä‡∞ú‡±Å‡∞ï‡±Å ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®</option>
                                <option value="rented">üèòÔ∏è ‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü‡∞ï‡±Å ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="annualRent" data-translate="annualRent">üí∞ ‡∞µ‡∞æ‡∞∞‡±ç‡∞∑‡∞ø‡∞ï ‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü (‚Çπ)</label>
                        <input type="number" id="annualRent" class="form-control" step="0.01" placeholder="0.00">
                    </div>
                </div>

                <!-- Inventory Fields -->
                <div id="inventoryFields" class="hidden">
                    <div class="grid grid-2 gap-2">
                        <div class="form-group">
                            <label for="inventoryQuantity" data-translate="quantity">üî¢ ‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç</label>
                            <input type="number" id="inventoryQuantity" class="form-control" step="0.1" placeholder="0.0">
                        </div>
                        <div class="form-group">
                            <label for="inventoryUnit" data-translate="unit">üì¶ ‡∞Ø‡±Ç‡∞®‡∞ø‡∞ü‡±ç</label>
                            <select id="inventoryUnit" class="form-control">
                                <option value="kg">‡∞ï‡∞ø‡∞≤‡±ã‡∞≤‡±Å</option>
                                <option value="tons">‡∞ü‡∞®‡±ç‡∞≤‡±Å</option>
                                <option value="liters">‡∞≤‡±Ä‡∞ü‡∞∞‡±ç‡∞≤‡±Å</option>
                                <option value="pieces">‡∞Æ‡±Å‡∞ï‡±ç‡∞ï‡∞≤‡±Å</option>
                                <option value="bags">‡∞∏‡∞Ç‡∞ö‡±Å‡∞≤‡±Å</option>
                                <option value="quintals">‡∞ï‡±ç‡∞µ‡∞ø‡∞Ç‡∞ü‡∞≤‡±ç‡∞∏‡±ç</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-2 gap-2">
                        <div class="form-group">
                            <label for="minStockLevel" data-translate="minStockLevel">‚ö†Ô∏è ‡∞ï‡∞®‡∞ø‡∞∑‡±ç‡∞ü ‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø</label>
                            <input type="number" id="minStockLevel" class="form-control" step="0.1" placeholder="0.0">
                        </div>
                        <div class="form-group">
                            <label for="maxStockLevel" data-translate="maxStockLevel">üìà ‡∞ó‡∞∞‡∞ø‡∞∑‡±ç‡∞ü ‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø</label>
                            <input type="number" id="maxStockLevel" class="form-control" step="0.1" placeholder="0.0">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="assetNotes" data-translate="notes">üìù ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)</label>
                    <textarea id="assetNotes" class="form-control" rows="2" placeholder="‡∞Ö‡∞¶‡∞®‡∞™‡±Å ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å..."></textarea>
                </div>
                <div class="flex gap-2">
                    <button type="submit" class="btn btn-primary btn-large">
                        <i class="fas fa-save"></i> <span data-translate="addAsset">‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addAssetModal')">
                        <i class="fas fa-times"></i> <span data-translate="cancel">‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Transaction History Modal -->
    <div id="transactionHistoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-history"></i> <span data-translate="transactionHistory">‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞</span>
                </h2>
                <button class="close-modal" onclick="closeModal('transactionHistoryModal')">&times;</button>
            </div>
            <div id="transactionHistoryContent">
                <!-- Transaction history will be loaded here -->
            </div>
        </div>
    </div>

    <!-- View Details Modal -->
    <div id="viewDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="viewDetailsTitle">
                    <i class="fas fa-eye"></i> <span data-translate="viewDetails">‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡∞®‡±Å ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø</span>
                </h2>
                <button class="close-modal" onclick="closeModal('viewDetailsModal')">&times;</button>
            </div>
            <div id="viewDetailsContent">
                <!-- Content will be populated dynamically -->
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCdfgtj1gvZ-bkomW1V40h-4tyUPHy_peo",
            authDomain: "jama-3f427.firebaseapp.com",
            projectId: "jama-3f427",
            storageBucket: "jama-3f427.firebasestorage.app",
            messagingSenderId: "897112470741",
            appId: "1:897112470741:web:ee6388f0faae459fcb1e5c",
            measurementId: "G-NN1BRV0QKS"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Weather API Configuration
        const WEATHER_API_KEY = '1G7YyF7MlPU3v0bx8oAL36JWwDziEgH5';
        const WEATHER_API_BASE = 'https://api.openweathermap.org/data/2.5';

        // Global Variables
        let currentUser = null;
        let currentSection = 'dashboard';
        let currentLanguage = 'te'; // Default to Telugu
        let currentTheme = 'light';
        let otpTimer = null;
        let confirmationResult = null;
        let autoSaveInterval = null;
        let userLocation = null;

        // Storage Keys
        const STORAGE_KEYS = {
            USER_DATA: 'jama_user_data',
            CROPS: 'jama_crops',
            TRANSACTIONS: 'jama_transactions',
            ASSETS: 'jama_assets',
            LOANS: 'jama_loans',
            SETTINGS: 'jama_settings',
            WEATHER_CACHE: 'jama_weather_cache',
            LAST_SECTION: 'jama_last_section'
        };

        // Complete Language Translations
        const translations = {
            te: {
                smartFarmSystem: "‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡±ç‡∞•",
                emailAddress: "‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ",
                password: "‡∞™‡∞æ‡∞∏‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞°‡±ç",
                signIn: "‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                orContinueWith: "‡∞≤‡±á‡∞¶‡∞æ ‡∞ï‡±ä‡∞®‡∞∏‡∞æ‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                signInWithGoogle: "Google ‡∞§‡±ã ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç",
                signInWithPhone: "‡∞´‡±ã‡∞®‡±ç ‡∞§‡±ã ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç",
                dontHaveAccount: "‡∞ñ‡∞æ‡∞§‡∞æ ‡∞≤‡±á‡∞¶‡∞æ?",
                registerHere: "‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                firstName: "‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞™‡±á‡∞∞‡±Å",
                lastName: "‡∞ö‡∞ø‡∞µ‡∞∞‡∞ø ‡∞™‡±á‡∞∞‡±Å",
                createPassword: "‡∞™‡∞æ‡∞∏‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞°‡±ç ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                phoneNumber: "‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç",
                location: "‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç",
                yourLocation: "‡∞Æ‡±Ä ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç",
                farmSizeAcres: "‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞≠‡±Ç‡∞Æ‡∞ø (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å)",
                primaryCrop: "‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞™‡∞Ç‡∞ü",
                selectPrimaryCrop: "‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                rice: "‡∞µ‡∞∞‡∞ø",
                wheat: "‡∞ó‡±ã‡∞ß‡±Å‡∞Æ",
                corn: "‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞®",
                cotton: "‡∞™‡∞§‡±ç‡∞§‡∞ø",
                sugarcane: "‡∞ö‡±Ü‡∞∞‡±Å‡∞ï‡±Å",
                pulses: "‡∞™‡∞™‡±ç‡∞™‡±Å‡∞≤‡±Å",
                vegetables: "‡∞ï‡±Ç‡∞∞‡∞ó‡∞æ‡∞Ø‡∞≤‡±Å",
                fruits: "‡∞™‡∞Ç‡∞°‡±ç‡∞≤‡±Å",
                createAccount: "‡∞ñ‡∞æ‡∞§‡∞æ ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                alreadyHaveAccount: "‡∞á‡∞™‡±ç‡∞™‡∞ü‡∞ø‡∞ï‡±á ‡∞ñ‡∞æ‡∞§‡∞æ ‡∞â‡∞Ç‡∞¶‡∞æ?",
                signInHere: "‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                sendOTP: "OTP ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø",
                enterOTP: "6-‡∞Ö‡∞Ç‡∞ï‡±Ü‡∞≤ OTP ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                verifyOTP: "OTP ‡∞ß‡±É‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                resendOTP: "OTP ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø",
                backToLogin: "‚Üê ‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç‚Äå‡∞ï‡±Å ‡∞§‡∞ø‡∞∞‡∞ø‡∞ó‡∞ø",
                dashboard: "‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç",
                cropManagement: "‡∞™‡∞Ç‡∞ü ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£",
                assetManagement: "‡∞Ü‡∞∏‡±ç‡∞§‡±Å‡∞≤ ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£",
                weather: "‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç",
                ideas: "‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å",
                profileSettings: "‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç & ‡∞∏‡±Ü‡∞ü‡±ç‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç‡∞∏‡±ç",
                farmDashboard: "‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç",
                totalIncome: "‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç",
                totalExpenses: "‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å",
                netProfit: "‡∞®‡∞ø‡∞ï‡∞∞ ‡∞≤‡∞æ‡∞≠‡∞Ç",
                transactionManagement: "‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£",
                addIncome: "‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                addExpense: "‡∞ñ‡∞∞‡±ç‡∞ö‡±Å ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                viewHistory: "‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞ ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø",
                recentTransactions: "‡∞á‡∞ü‡±Ä‡∞µ‡∞≤‡∞ø ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞≤‡±Å",
                incomeVsExpenses: "‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç vs ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å (‡∞ó‡∞§ 6 ‡∞®‡±Ü‡∞≤‡∞≤‡±Å)",
                addNewCrop: "‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                allStatus: "‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡±Å‡∞≤‡±Å",
                active: "‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞æ‡∞∂‡±Ä‡∞≤",
                harvested: "‡∞ï‡±ã‡∞§ ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø",
                planned: "‡∞™‡±ç‡∞∞‡∞£‡∞æ‡∞≥‡∞ø‡∞ï",
                allSeasons: "‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞ï‡∞æ‡∞≤‡∞æ‡∞≤‡±Å",
                searchCrops: "üîç ‡∞™‡∞Ç‡∞ü‡∞≤‡∞®‡±Å ‡∞µ‡±Ü‡∞§‡∞ï‡∞Ç‡∞°‡∞ø...",
                addAsset: "‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                equipment: "‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å",
                livestock: "‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤‡±Å",
                land: "‡∞≠‡±Ç‡∞Æ‡∞ø",
                inventory: "‡∞≠‡∞Ç‡∞°‡∞æ‡∞∞‡∞Ç",
                weatherInformation: "‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç",
                fiveDayForecast: "5 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤ ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ",
                humidity: "‡∞§‡±á‡∞Æ",
                wind: "‡∞ó‡∞æ‡∞≤‡∞ø",
                feelsLike: "‡∞Ö‡∞®‡±Å‡∞≠‡∞µ‡∞Ç",
                visibility: "‡∞¶‡±É‡∞∂‡±ç‡∞Ø‡∞§",
                smartFarmIdeas: "‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å",
                profileInformation: "‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç",
                fullName: "‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞™‡±á‡∞∞‡±Å",
                email: "‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç",
                phone: "‡∞´‡±ã‡∞®‡±ç",
                updateProfile: "‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç ‡∞®‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                appSettings: "‡∞Ø‡∞æ‡∞™‡±ç ‡∞∏‡±Ü‡∞ü‡±ç‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç‡∞∏‡±ç",
                theme: "‡∞•‡±Ä‡∞Æ‡±ç",
                light: "‡∞ï‡∞æ‡∞Ç‡∞§‡∞ø",
                dark: "‡∞ö‡±Ä‡∞ï‡∞ü‡∞ø",
                language: "‡∞≠‡∞æ‡∞∑",
                dataManagement: "‡∞°‡±á‡∞ü‡∞æ ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£",
                exportData: "‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞°‡±á‡∞ü‡∞æ‡∞®‡±Å ‡∞é‡∞ó‡±Å‡∞Æ‡∞§‡∞ø ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (PDF)",
                backupToCloud: "‡∞ï‡±ç‡∞≤‡±å‡∞°‡±ç‚Äå‡∞ï‡±Å ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ï‡∞™‡±ç",
                clearAllData: "‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞°‡±á‡∞ü‡∞æ‡∞®‡±Å ‡∞ï‡±ç‡∞≤‡∞ø‡∞Ø‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                crops: "‡∞™‡∞Ç‡∞ü‡∞≤‡±Å",
                assets: "‡∞Ü‡∞∏‡±ç‡∞§‡±Å‡∞≤‡±Å",
                profile: "‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç",
                cropName: "‡∞™‡∞Ç‡∞ü ‡∞™‡±á‡∞∞‡±Å",
                selectCrop: "‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                variety: "‡∞∞‡∞ï‡∞Ç",
                areaAcres: "‡∞µ‡±à‡∞∂‡∞æ‡∞≤‡±ç‡∞Ø‡∞Ç (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å)",
                durationMonths: "‡∞µ‡±ç‡∞Ø‡∞µ‡∞ß‡∞ø (‡∞®‡±Ü‡∞≤‡∞≤‡±Å)",
                selectDuration: "‡∞µ‡±ç‡∞Ø‡∞µ‡∞ß‡∞ø‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                sowingDate: "‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤ ‡∞§‡±á‡∞¶‡±Ä",
                expectedHarvest: "‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞ï‡±ã‡∞§ ‡∞§‡±á‡∞¶‡±Ä",
                expectedYield: "‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø (‡∞ü‡∞®‡±ç‡∞≤‡±Å)",
                expectedPrice: "‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞ß‡∞∞ (‚Çπ/‡∞ü‡∞®‡±ç)",
                notes: "‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å",
                addCrop: "‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                cancel: "‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                type: "‡∞∞‡∞ï‡∞Ç",
                selectType: "‡∞∞‡∞ï‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                category: "‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç",
                selectCategory: "‡∞µ‡∞∞‡±ç‡∞ó‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                description: "‡∞µ‡∞ø‡∞µ‡∞∞‡∞£",
                amount: "‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç",
                date: "‡∞§‡±á‡∞¶‡±Ä",
                paymentMethod: "‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞™‡±Å ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡∞ø",
                relatedCrop: "‡∞∏‡∞Ç‡∞¨‡∞Ç‡∞ß‡∞ø‡∞§ ‡∞™‡∞Ç‡∞ü (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)",
                contactNumber: "‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞™‡±Å ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)",
                addTransaction: "‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                harvestCrop: "‡∞™‡∞Ç‡∞ü ‡∞ï‡±ã‡∞Ø‡∞Ç‡∞°‡∞ø",
                harvestQuantity: "‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç",
                unit: "‡∞Ø‡±Ç‡∞®‡∞ø‡∞ü‡±ç",
                pricePerUnit: "‡∞Ø‡±Ç‡∞®‡∞ø‡∞ü‡±ç‚Äå‡∞ï‡±Å ‡∞ß‡∞∞ (‚Çπ)",
                totalSaleAmount: "‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞™‡±Å ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç (‚Çπ)",
                buyerContact: "‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å‡∞¶‡∞æ‡∞∞‡±Å ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞™‡±Å (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)",
                completeHarvest: "‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                assetType: "‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞∞‡∞ï‡∞Ç",
                name: "‡∞™‡±á‡∞∞‡±Å",
                purchaseDate: "‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å ‡∞§‡±á‡∞¶‡±Ä",
                purchasePrice: "‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å ‡∞ß‡∞∞ (‚Çπ)",
                condition: "‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø",
                annualMaintenance: "‡∞µ‡∞æ‡∞∞‡±ç‡∞∑‡∞ø‡∞ï ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ (‚Çπ)",
                workHoursPerDay: "‡∞∞‡±ã‡∞ú‡±Å‡∞ï‡±Å ‡∞™‡∞®‡∞ø ‡∞ó‡∞Ç‡∞ü‡∞≤‡±Å",
                count: "‡∞≤‡±Ü‡∞ï‡±ç‡∞ï",
                breed: "‡∞ú‡∞æ‡∞§‡∞ø",
                healthStatus: "‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø",
                dailyMilkProduction: "‡∞¶‡±à‡∞®‡∞ø‡∞ï ‡∞™‡∞æ‡∞≤ ‡∞â‡∞§‡±ç‡∞™‡∞æ‡∞¶‡∞® (‡∞≤‡±Ä‡∞ü‡∞∞‡±ç‡∞≤‡±Å)",
                dailyFeedCost: "‡∞¶‡±à‡∞®‡∞ø‡∞ï ‡∞Ü‡∞π‡∞æ‡∞∞ ‡∞ß‡∞∞ (‚Çπ)",
                sizeAcres: "‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç (‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å)",
                landType: "‡∞≠‡±Ç‡∞Æ‡∞ø ‡∞∞‡∞ï‡∞Ç",
                annualRent: "‡∞µ‡∞æ‡∞∞‡±ç‡∞∑‡∞ø‡∞ï ‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü (‚Çπ)",
                quantity: "‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç",
                minStockLevel: "‡∞ï‡∞®‡∞ø‡∞∑‡±ç‡∞ü ‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø",
                maxStockLevel: "‡∞ó‡∞∞‡∞ø‡∞∑‡±ç‡∞ü ‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø",
                transactionHistory: "‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞",
                viewDetails: "‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡∞®‡±Å ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø",
                autoSaved: "‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø",
                initializing: "‡∞Æ‡±Ä ‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞°‡±ç‡∞Ø‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç‚Äå‡∞®‡±Å ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...",
                enterEmail: "‡∞Æ‡±Ä ‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç‚Äå‡∞®‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                enterPassword: "‡∞Æ‡±Ä ‡∞™‡∞æ‡∞∏‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞°‡±ç‚Äå‡∞®‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                detectingLocation: "‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...",
                close: "‡∞Æ‡±Ç‡∞∏‡∞ø‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø"
            },
            hi: {
                smartFarmSystem: "‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§´‡§æ‡§∞‡•ç‡§Æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä",
                emailAddress: "‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ",
                password: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°",
                signIn: "‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç",
                orContinueWith: "‡§Ø‡§æ ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç",
                signInWithGoogle: "Google ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç",
                signInWithPhone: "‡§´‡•ã‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç",
                dontHaveAccount: "‡§ñ‡§æ‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?",
                registerHere: "‡§Ø‡§π‡§æ‡§Å ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç",
                firstName: "‡§™‡§π‡§≤‡§æ ‡§®‡§æ‡§Æ",
                lastName: "‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§®‡§æ‡§Æ",
                createPassword: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è‡§Ç",
                phoneNumber: "‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞",
                location: "‡§∏‡•ç‡§•‡§æ‡§®",
                yourLocation: "‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§®",
                farmSizeAcres: "‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ (‡§è‡§ï‡§°‡§º)",
                primaryCrop: "‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§´‡§∏‡§≤",
                selectPrimaryCrop: "‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§´‡§∏‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç",
                rice: "‡§ö‡§æ‡§µ‡§≤",
                wheat: "‡§ó‡•á‡§π‡•Ç‡§Ç",
                corn: "‡§Æ‡§ï‡•ç‡§ï‡§æ",
                cotton: "‡§ï‡§™‡§æ‡§∏",
                sugarcane: "‡§ó‡§®‡•ç‡§®‡§æ",
                pulses: "‡§¶‡§æ‡§≤",
                vegetables: "‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡§æ‡§Ç",
                fruits: "‡§´‡§≤",
                createAccount: "‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§è‡§Ç",
                alreadyHaveAccount: "‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§ñ‡§æ‡§§‡§æ ‡§π‡•à?",
                signInHere: "‡§Ø‡§π‡§æ‡§Å ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç",
                sendOTP: "OTP ‡§≠‡•á‡§ú‡•á‡§Ç",
                enterOTP: "6-‡§Ö‡§Ç‡§ï‡•Ä‡§Ø OTP ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
                verifyOTP: "OTP ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç",
                resendOTP: "OTP ‡§™‡•Å‡§®‡§É ‡§≠‡•á‡§ú‡•á‡§Ç",
                backToLogin: "‚Üê ‡§≤‡•â‡§ó‡§ø‡§® ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏",
                dashboard: "‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
                cropManagement: "‡§´‡§∏‡§≤ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®",
                assetManagement: "‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®",
                weather: "‡§Æ‡•å‡§∏‡§Æ",
                ideas: "‡§µ‡§ø‡§ö‡§æ‡§∞",
                profileSettings: "‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§î‡§∞ ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏",
                farmDashboard: "‡§´‡§æ‡§∞‡•ç‡§Æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
                totalIncome: "‡§ï‡•Å‡§≤ ‡§Ü‡§Ø",
                totalExpenses: "‡§ï‡•Å‡§≤ ‡§ñ‡§∞‡•ç‡§ö",
                netProfit: "‡§∂‡•Å‡§¶‡•ç‡§ß ‡§≤‡§æ‡§≠",
                transactionManagement: "‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®",
                addIncome: "‡§Ü‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
                addExpense: "‡§ñ‡§∞‡•ç‡§ö ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
                viewHistory: "‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§¶‡•á‡§ñ‡•á‡§Ç",
                recentTransactions: "‡§π‡§æ‡§≤ ‡§ï‡•á ‡§≤‡•á‡§®-‡§¶‡•á‡§®",
                incomeVsExpenses: "‡§Ü‡§Ø ‡§¨‡§®‡§æ‡§Æ ‡§µ‡•ç‡§Ø‡§Ø (‡§™‡§ø‡§õ‡§≤‡•á 6 ‡§Æ‡§π‡•Ä‡§®‡•á)",
                addNewCrop: "‡§®‡§à ‡§´‡§∏‡§≤ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
                allStatus: "‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
                active: "‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø",
                harvested: "‡§ï‡§ü‡§æ‡§à ‡§ï‡•Ä ‡§ó‡§à",
                planned: "‡§Ø‡•ã‡§ú‡§®‡§æ‡§¨‡§¶‡•ç‡§ß",
                allSeasons: "‡§∏‡§≠‡•Ä ‡§Æ‡•å‡§∏‡§Æ",
                searchCrops: "üîç ‡§´‡§∏‡§≤‡•á‡§Ç ‡§ñ‡•ã‡§ú‡•á‡§Ç...",
                addAsset: "‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
                equipment: "‡§â‡§™‡§ï‡§∞‡§£",
                livestock: "‡§™‡§∂‡•Å‡§ß‡§®",
                land: "‡§≠‡•Ç‡§Æ‡§ø",
                inventory: "‡§≠‡§Ç‡§°‡§æ‡§∞",
                weatherInformation: "‡§Æ‡•å‡§∏‡§Æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",
                fiveDayForecast: "5 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®",
                humidity: "‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ",
                wind: "‡§π‡§µ‡§æ",
                feelsLike: "‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã‡§§‡§æ ‡§π‡•à",
                visibility: "‡§¶‡•É‡§∂‡•ç‡§Ø‡§§‡§æ",
                smartFarmIdeas: "‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§´‡§æ‡§∞‡•ç‡§Æ ‡§µ‡§ø‡§ö‡§æ‡§∞",
                profileInformation: "‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",
                fullName: "‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ",
                email: "‡§à‡§Æ‡•á‡§≤",
                phone: "‡§´‡•ã‡§®",
                updateProfile: "‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç",
                appSettings: "‡§ê‡§™ ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏",
                theme: "‡§•‡•Ä‡§Æ",
                light: "‡§π‡§≤‡•ç‡§ï‡§æ",
                dark: "‡§ó‡§π‡§∞‡§æ",
                language: "‡§≠‡§æ‡§∑‡§æ",
                dataManagement: "‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®",
                exportData: "‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç (PDF)",
                backupToCloud: "‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§™‡§∞ ‡§¨‡•à‡§ï‡§Ö‡§™",
                clearAllData: "‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç",
                crops: "‡§´‡§∏‡§≤‡•á‡§Ç",
                assets: "‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø",
                profile: "‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤",
                close: "‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç"
            },
            en: {
                smartFarmSystem: "Smart Farm Management System",
                emailAddress: "Email Address",
                password: "Password",
                signIn: "Sign In",
                orContinueWith: "or continue with",
                signInWithGoogle: "Sign in with Google",
                signInWithPhone: "Sign in with Phone",
                dontHaveAccount: "Don't have an account?",
                registerHere: "Register here",
                firstName: "First Name",
                lastName: "Last Name",
                createPassword: "Create a password",
                phoneNumber: "Phone Number",
                location: "Location",
                yourLocation: "Your location",
                farmSizeAcres: "Farm Size (acres)",
                primaryCrop: "Primary Crop",
                selectPrimaryCrop: "Select Primary Crop",
                rice: "Rice",
                wheat: "Wheat",
                corn: "Corn",
                cotton: "Cotton",
                sugarcane: "Sugarcane",
                pulses: "Pulses",
                vegetables: "Vegetables",
                fruits: "Fruits",
                createAccount: "Create Account",
                alreadyHaveAccount: "Already have an account?",
                signInHere: "Sign in here",
                sendOTP: "Send OTP",
                enterOTP: "Enter 6-digit OTP",
                verifyOTP: "Verify OTP",
                resendOTP: "Resend OTP",
                backToLogin: "‚Üê Back to Login",
                dashboard: "Dashboard",
                cropManagement: "Crop Management",
                assetManagement: "Asset Management",
                weather: "Weather",
                ideas: "Ideas",
                profileSettings: "Profile & Settings",
                farmDashboard: "Farm Dashboard",
                totalIncome: "Total Income",
                totalExpenses: "Total Expenses",
                netProfit: "Net Profit",
                transactionManagement: "Transaction Management",
                addIncome: "Add Income",
                addExpense: "Add Expense",
                viewHistory: "View History",
                recentTransactions: "Recent Transactions",
                incomeVsExpenses: "Income vs Expenses (Last 6 Months)",
                addNewCrop: "Add New Crop",
                allStatus: "All Status",
                active: "Active",
                harvested: "Harvested",
                planned: "Planned",
                allSeasons: "All Seasons",
                searchCrops: "üîç Search crops...",
                addAsset: "Add Asset",
                equipment: "Equipment",
                livestock: "Livestock",
                land: "Land",
                inventory: "Inventory",
                weatherInformation: "Weather Information",
                fiveDayForecast: "5-Day Weather Forecast",
                humidity: "Humidity",
                wind: "Wind",
                feelsLike: "Feels Like",
                visibility: "Visibility",
                smartFarmIdeas: "Smart Farm Ideas",
                profileInformation: "Profile Information",
                fullName: "Full Name",
                email: "Email",
                phone: "Phone",
                updateProfile: "Update Profile",
                appSettings: "App Settings",
                theme: "Theme",
                light: "Light",
                dark: "Dark",
                language: "Language",
                dataManagement: "Data Management",
                exportData: "Export All Data (PDF)",
                backupToCloud: "Backup to Cloud",
                clearAllData: "Clear All Data",
                crops: "Crops",
                assets: "Assets",
                profile: "Profile",
                close: "Close"
            }
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Show loading screen
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
                checkAuthState();
            }, 3000);

            // Initialize event listeners
            initializeEventListeners();
            
            // Load settings
            loadSettings();
            
            // Initialize auto-save
            initializeAutoSave();
            
            // Apply initial language
            applyTranslations();
            
            // Get user location
            getUserLocation();
        }

        function initializeEventListeners() {
            // Authentication form handlers
            document.getElementById('emailLoginForm').addEventListener('submit', handleEmailLogin);
            document.getElementById('emailRegisterForm').addEventListener('submit', handleEmailRegister);
            document.getElementById('googleSignIn').addEventListener('click', handleGoogleSignIn);
            document.getElementById('phoneSignIn').addEventListener('click', showPhoneAuth);
            document.getElementById('sendOTP').addEventListener('click', handleSendOTP);
            document.getElementById('verifyOTP').addEventListener('click', handleVerifyOTP);
            document.getElementById('resendOTP').addEventListener('click', handleResendOTP);
            
            // Form toggle handlers
            document.getElementById('showRegister').addEventListener('click', (e) => {
                e.preventDefault();
                toggleAuthForm('register');
            });
            document.getElementById('showLogin').addEventListener('click', (e) => {
                e.preventDefault();
                toggleAuthForm('login');
            });
            document.getElementById('backToLogin').addEventListener('click', (e) => {
                e.preventDefault();
                toggleAuthForm('login');
            });

            // Theme and language handlers
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('languageSelect').addEventListener('change', (e) => {
                changeLanguage(e.target.value);
            });

            // Form handlers
            document.getElementById('addCropForm').addEventListener('submit', handleAddCrop);
            document.getElementById('addTransactionForm').addEventListener('submit', handleAddTransaction);
            document.getElementById('addAssetForm').addEventListener('submit', handleAddAsset);
            document.getElementById('profileForm').addEventListener('submit', handleUpdateProfile);
            document.getElementById('harvestForm').addEventListener('submit', handleHarvest);

            // Auto-calculate harvest total
            document.getElementById('harvestQuantity').addEventListener('input', calculateHarvestTotal);
            document.getElementById('pricePerUnit').addEventListener('input', calculateHarvestTotal);

            // Auto-calculate expected harvest date
            document.getElementById('cropSeason').addEventListener('change', updateExpectedHarvest);
            document.getElementById('sowingDate').addEventListener('change', updateExpectedHarvest);

            // Phone number formatting
            document.getElementById('regPhone').addEventListener('input', formatPhoneNumber);
            document.getElementById('phoneNumber').addEventListener('input', formatPhoneNumber);

            // Close modals when clicking outside
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    closeModal(e.target.id);
                }
                if (e.target.classList.contains('quick-actions-overlay')) {
                    closeQuickActions();
                }
            });
        }

        function getUserLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        getLocationName(userLocation.lat, userLocation.lng);
                        loadWeatherData();
                    },
                    (error) => {
                        console.log('Location access denied or error:', error);
                        document.getElementById('currentLocation').innerHTML = '<i class="fas fa-map-marker-alt"></i> <span>Location unavailable</span>';
                        // Use default location for weather
                        loadWeatherData();
                    }
                );
            } else {
                console.log('Geolocation not supported');
                document.getElementById('currentLocation').innerHTML = '<i class="fas fa-map-marker-alt"></i> <span>Location not supported</span>';
                loadWeatherData();
            }
        }

        async function getLocationName(lat, lng) {
            try {
                const response = await fetch(`https://api.openweathermap.org/geo/1.0/reverse?lat=${lat}&lon=${lng}&limit=1&appid=${WEATHER_API_KEY}`);
                const data = await response.json();
                
                if (data && data[0]) {
                    const locationName = data[0].name + ', ' + data[0].state;
                    document.getElementById('currentLocation').innerHTML = `<i class="fas fa-map-marker-alt"></i> <span>${locationName}</span>`;
                    document.getElementById('weatherLocationName').textContent = locationName;
                }
            } catch (error) {
                console.log('Error getting location name:', error);
                document.getElementById('currentLocation').innerHTML = '<i class="fas fa-map-marker-alt"></i> <span>Location detected</span>';
            }
        }

        // Crop image handling
        function previewCropImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('cropImagePreview');
                    preview.innerHTML = `<img src="${e.target.result}" alt="Crop preview">`;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function updateCropImage() {
            const cropName = document.getElementById('cropName').value;
            if (cropName && !document.getElementById('cropImageInput').files[0]) {
                const imageUrl = getCropImage(cropName);
                const preview = document.getElementById('cropImagePreview');
                preview.innerHTML = `<img src="${imageUrl}" alt="${cropName}">`;
            }
        }

        // Area slider handling
        function updateAreaValue(value) {
            document.getElementById('areaValue').textContent = `${parseFloat(value).toFixed(1)} ‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å`;
        }

        function toggleCustomArea() {
            const customInput = document.getElementById('customAreaInput');
            const slider = document.getElementById('cropAreaSlider');
            const checkbox = document.getElementById('useCustomArea');
            
            if (checkbox.checked) {
                customInput.classList.add('show');
                slider.style.display = 'none';
                document.getElementById('areaValue').style.display = 'none';
            } else {
                customInput.classList.remove('show');
                slider.style.display = 'block';
                document.getElementById('areaValue').style.display = 'block';
            }
        }

        function updateSliderFromInput(value) {
            if (value <= 10) {
                document.getElementById('cropAreaSlider').value = value;
                updateAreaValue(value);
            }
        }

        function formatPhoneNumber(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 10) value = value.substring(0, 10);
            e.target.value = value;
        }

        function initializeAutoSave() {
            // Auto-save every 30 seconds when user is active
            autoSaveInterval = setInterval(() => {
                if (currentUser) {
                    autoSaveToFirebase();
                }
            }, 30000);

            // Auto-save on data changes
            const dataChangeEvents = ['change', 'input'];
            dataChangeEvents.forEach(eventType => {
                document.addEventListener(eventType, (e) => {
                    if (e.target.classList.contains('form-control') && currentUser) {
                        debounceAutoSave();
                    }
                });
            });
        }

        let autoSaveTimeout;
        function debounceAutoSave() {
            clearTimeout(autoSaveTimeout);
            autoSaveTimeout = setTimeout(() => {
                autoSaveToFirebase();
            }, 2000);
        }

        async function autoSaveToFirebase() {
            if (!currentUser || !currentUser.uid) return;

            const indicator = document.getElementById('autoSaveIndicator');
            indicator.classList.add('show', 'saving');
            indicator.innerHTML = '<i class="fas fa-sync fa-spin"></i> <span>Saving...</span>';
            
            try {
                // Save all data to Firebase
                const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
                const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
                const assets = JSON.parse(localStorage.getItem(STORAGE_KEYS.ASSETS) || '[]');
                const settings = JSON.parse(localStorage.getItem(STORAGE_KEYS.SETTINGS) || '{}');

                // Batch save to Firebase
                const batch = db.batch();
                
                // Save user data
                const userRef = db.collection('userData').doc(currentUser.uid);
                batch.set(userRef, {
                    crops,
                    transactions,
                    assets,
                    settings,
                    lastSaved: firebase.firestore.FieldValue.serverTimestamp()
                }, { merge: true });

                await batch.commit();

                indicator.classList.remove('saving');
                indicator.innerHTML = '<i class="fas fa-check-circle"></i> <span>Auto-saved to cloud</span>';
                
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 2000);
            } catch (error) {
                console.error('Auto-save error:', error);
                indicator.classList.remove('saving');
                indicator.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>Save failed</span>';
                
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 3000);
            }
        }

        // Authentication Functions
        function checkAuthState() {
            const savedUser = localStorage.getItem(STORAGE_KEYS.USER_DATA);
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('authContainer').style.display = 'none';
                document.getElementById('appContainer').style.display = 'block';
                loadUserData();
                initializeDashboard();
            } else {
                auth.onAuthStateChanged((user) => {
                    if (user) {
                        currentUser = {
                            uid: user.uid,
                            email: user.email,
                            displayName: user.displayName
                        };
                        localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(currentUser));
                        document.getElementById('authContainer').style.display = 'none';
                        document.getElementById('appContainer').style.display = 'block';
                        loadUserData();
                        initializeDashboard();
                    } else {
                        document.getElementById('authContainer').style.display = 'flex';
                        document.getElementById('appContainer').style.display = 'none';
                    }
                });
            }
        }

        async function handleEmailLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                showNotification('‡∞∏‡±à‡∞®‡±ç ‡∞á‡∞®‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'info');
                await auth.signInWithEmailAndPassword(email, password);
                showNotification('‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç! üéâ', 'success');
            } catch (error) {
                console.error('Login error:', error);
                showNotification(getErrorMessage(error.code), 'error');
            }
        }

        async function handleEmailRegister(e) {
            e.preventDefault();
            const formData = {
                firstName: document.getElementById('regFirstName').value,
                lastName: document.getElementById('regLastName').value,
                email: document.getElementById('regEmail').value,
                password: document.getElementById('regPassword').value,
                phone: '+91' + document.getElementById('regPhone').value,
                location: document.getElementById('regLocation').value,
                farmSize: parseFloat(document.getElementById('regFarmSize').value),
                primaryCrop: document.getElementById('regPrimaryCrop').value
            };

            try {
                showNotification('‡∞Æ‡±Ä ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞ñ‡∞æ‡∞§‡∞æ‡∞®‡±Å ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'info');
                const userCredential = await auth.createUserWithEmailAndPassword(formData.email, formData.password);
                
                // Update profile
                await userCredential.user.updateProfile({
                    displayName: `${formData.firstName} ${formData.lastName}`
                });
                
                // Save user data to Firestore
                await db.collection('users').doc(userCredential.user.uid).set({
                    ...formData,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                showNotification('‡∞ñ‡∞æ‡∞§‡∞æ ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! ‡∞ú‡∞Æ‡∞æApp‡∞ï‡±Å ‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç! üå±', 'success');
            } catch (error) {
                console.error('Registration error:', error);
                showNotification(getErrorMessage(error.code), 'error');
            }
        }

        async function handleGoogleSignIn() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                showNotification('Google ‡∞§‡±ã ‡∞∏‡±à‡∞®‡±ç ‡∞á‡∞®‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'info');
                await auth.signInWithPopup(provider);
                showNotification('Google ‡∞∏‡±à‡∞®‡±ç ‡∞á‡∞®‡±ç ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç! üéâ', 'success');
            } catch (error) {
                console.error('Google sign-in error:', error);
                showNotification(getErrorMessage(error.code), 'error');
            }
        }

        function showPhoneAuth() {
            toggleAuthForm('otp');
        }

        async function handleSendOTP() {
            const phoneNumber = '+91' + document.getElementById('phoneNumber').value;
            if (!phoneNumber || phoneNumber.length !== 13) {
                showNotification('‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞µ‡±à‡∞ß‡∞Æ‡±à‡∞® 10-‡∞Ö‡∞Ç‡∞ï‡±Ü‡∞≤ ‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø', 'warning');
                return;
            }

            try {
                showNotification('OTP ‡∞™‡∞Ç‡∞™‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'info');
                
                // Initialize reCAPTCHA
                if (!window.recaptchaVerifier) {
                    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                        'size': 'normal',
                        'callback': function(response) {
                            console.log('reCAPTCHA solved');
                        }
                    });
                }

                confirmationResult = await auth.signInWithPhoneNumber(phoneNumber, window.recaptchaVerifier);
                
                document.getElementById('otpInput').style.display = 'block';
                document.getElementById('sendOTP').style.display = 'none';
                startOTPTimer();
                showNotification('OTP ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞™‡∞Ç‡∞™‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! üì±', 'success');
            } catch (error) {
                console.error('OTP send error:', error);
                showNotification(getErrorMessage(error.code), 'error');
            }
        }

        async function handleVerifyOTP() {
            const otpCode = document.getElementById('otpCode').value;
            if (!otpCode || !confirmationResult) {
                showNotification('‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø OTP ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø', 'warning');
                return;
            }

            try {
                showNotification('OTP ‡∞ß‡±É‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'info');
                await confirmationResult.confirm(otpCode);
                showNotification('‡∞´‡±ã‡∞®‡±ç ‡∞ß‡±É‡∞µ‡±Ä‡∞ï‡∞∞‡∞£ ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç! üéâ', 'success');
            } catch (error) {
                console.error('OTP verification error:', error);
                showNotification('‡∞§‡∞™‡±ç‡∞™‡±Å OTP. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.', 'error');
            }
        }

        async function handleResendOTP() {
            await handleSendOTP();
        }

        function startOTPTimer() {
            let timeLeft = 60;
            const timerElement = document.getElementById('otpTimer');
            const resendButton = document.getElementById('resendOTP');
            
            resendButton.disabled = true;
            
            otpTimer = setInterval(() => {
                timerElement.textContent = `${timeLeft} ‡∞∏‡±Ü‡∞ï‡∞®‡±ç‡∞≤‡∞≤‡±ã OTP ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡∞Ç‡∞™‡∞µ‡∞ö‡±ç‡∞ö‡±Å`;
                timeLeft--;
                
                if (timeLeft < 0) {
                    clearInterval(otpTimer);
                    timerElement.textContent = '‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å OTP ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡∞Ç‡∞™‡∞µ‡∞ö‡±ç‡∞ö‡±Å';
                    resendButton.disabled = false;
                }
            }, 1000);
        }

        function toggleAuthForm(formType) {
            document.getElementById('loginForm').style.display = formType === 'login' ? 'block' : 'none';
            document.getElementById('registerForm').style.display = formType === 'register' ? 'block' : 'none';
            document.getElementById('otpForm').style.display = formType === 'otp' ? 'block' : 'none';
        }

        async function signOut() {
            try {
                await auth.signOut();
                localStorage.clear();
                currentUser = null;
                showNotification('‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞∏‡±à‡∞®‡±ç ‡∞Ö‡∞µ‡±Å‡∞ü‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞æ‡∞∞‡±Å! üëã', 'success');
                location.reload();
            } catch (error) {
                console.error('Sign out error:', error);
                showNotification('‡∞∏‡±à‡∞®‡±ç ‡∞Ö‡∞µ‡±Å‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç‡∞≤‡±ã ‡∞≤‡±ã‡∞™‡∞Ç', 'error');
            }
        }

        // Data Management Functions
        async function loadUserData() {
            try {
                if (currentUser && currentUser.uid) {
                    // Load from Firestore first
                    const userDataDoc = await db.collection('userData').doc(currentUser.uid).get();
                    if (userDataDoc.exists) {
                        const cloudData = userDataDoc.data();
                        
                        // Update local storage with cloud data
                        if (cloudData.crops) localStorage.setItem(STORAGE_KEYS.CROPS, JSON.stringify(cloudData.crops));
                        if (cloudData.transactions) localStorage.setItem(STORAGE_KEYS.TRANSACTIONS, JSON.stringify(cloudData.transactions));
                        if (cloudData.assets) localStorage.setItem(STORAGE_KEYS.ASSETS, JSON.stringify(cloudData.assets));
                        if (cloudData.settings) localStorage.setItem(STORAGE_KEYS.SETTINGS, JSON.stringify(cloudData.settings));
                        
                        showNotification('‡∞ï‡±ç‡∞≤‡±å‡∞°‡±ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞°‡±á‡∞ü‡∞æ ‡∞∏‡∞ø‡∞Ç‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! ‚òÅÔ∏è', 'success');
                    }
                    
                    // Load user profile
                    const userDoc = await db.collection('users').doc(currentUser.uid).get();
                    if (userDoc.exists) {
                        const userData = userDoc.data();
                        populateProfileForm(userData);
                        
                        // Set location if available
                        if (userData.location) {
                            document.getElementById('cropLocation').value = userData.location;
                        }
                    }
                }

                loadCrops();
                loadTransactions();
                loadAssets();
                loadWeatherData();
                updateDashboardStats();
            } catch (error) {
                console.error('Error loading user data:', error);
                // Load from local storage as fallback
                loadCrops();
                loadTransactions();
                loadAssets();
                updateDashboardStats();
            }
        }

        function populateProfileForm(userData) {
            document.getElementById('profileName').value = userData.displayName || `${userData.firstName || ''} ${userData.lastName || ''}`.trim();
            document.getElementById('profileEmail').value = userData.email || (currentUser ? currentUser.email : '');
            document.getElementById('profilePhone').value = userData.phone || '';
            document.getElementById('profileLocation').value = userData.location || '';
            document.getElementById('profileFarmSize').value = userData.farmSize || '';
        }

        // Navigation Functions
        function showSection(sectionName) {
            localStorage.setItem(STORAGE_KEYS.LAST_SECTION, sectionName);
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });

            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');

            // Update active navigation
            document.querySelectorAll('.sidebar-nav a, .mobile-nav-item').forEach(nav => {
                nav.classList.remove('active');
            });
            const sidebarNav = document.getElementById(`nav-${sectionName}`);
            if (sidebarNav) sidebarNav.classList.add('active');
            
            const mobileNavs = document.querySelectorAll('.mobile-nav-item');
            mobileNavs.forEach(nav => {
                const onclick = nav.getAttribute('onclick');
                if (onclick && onclick.includes(sectionName)) {
                    nav.classList.add('active');
                }
            });

            currentSection = sectionName;

            // Load section-specific data
            switch(sectionName) {
                case 'dashboard':
                    initializeDashboard();
                    break;
                case 'crops':
                    loadCrops();
                    break;
                case 'assets':
                    loadAssets();
                    break;
                case 'weather':
                    loadWeatherData();
                    break;
                case 'ideas':
                    loadIdeasSection();
                    break;
            }
        }

        // Dashboard Functions
        function initializeDashboard() {
            updateDashboardStats();
            loadRecentTransactions();
            setTimeout(() => {
                initializeCharts();
            }, 1000);
        }

        function updateDashboardStats() {
            const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
            
            let totalIncome = 0;
            let totalExpenses = 0;

            transactions.forEach(transaction => {
                if (transaction.type === 'income') {
                    totalIncome += transaction.amount;
                } else if (transaction.type === 'expense') {
                    totalExpenses += transaction.amount;
                }
            });

            const netProfit = totalIncome - totalExpenses;

            // Update dashboard stats
            document.getElementById('totalIncome').textContent = `‚Çπ${totalIncome.toLocaleString('en-IN')}`;
            document.getElementById('totalExpenses').textContent = `‚Çπ${totalExpenses.toLocaleString('en-IN')}`;
            document.getElementById('netProfit').textContent = `‚Çπ${netProfit.toLocaleString('en-IN')}`;

            // Calculate percentage changes (mock data for now)
            const incomeChange = Math.random() * 20 - 10;
            const expenseChange = Math.random() * 20 - 10;
            const profitChange = Math.random() * 30 - 15;

            document.getElementById('incomeChange').textContent = `${incomeChange > 0 ? '+' : ''}${incomeChange.toFixed(1)}% ‡∞ó‡∞§ ‡∞®‡±Ü‡∞≤ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø`;
            document.getElementById('expenseChange').textContent = `${expenseChange > 0 ? '+' : ''}${expenseChange.toFixed(1)}% ‡∞ó‡∞§ ‡∞®‡±Ü‡∞≤ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø`;
            document.getElementById('profitChange').textContent = `${profitChange > 0 ? '+' : ''}${profitChange.toFixed(1)}% ‡∞ó‡∞§ ‡∞®‡±Ü‡∞≤ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø`;
        }

        function loadRecentTransactions() {
            const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
            const recentTransactions = transactions.slice(-5).reverse();
            const container = document.getElementById('recentTransactionsList');
            
            if (recentTransactions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 2rem; text-align: center;">
                        <i class="fas fa-receipt" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                        <p style="color: var(--text-secondary);">‡∞á‡∞Ç‡∞ï‡∞æ ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞≤‡±Å ‡∞≤‡±á‡∞µ‡±Å</p>
                        <button class="btn btn-primary" onclick="addQuickTransaction('expense')" style="margin-top: 0.5rem;">
                            <i class="fas fa-plus"></i> ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = recentTransactions.map(transaction => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid var(--border-color);">
                    <div>
                        <div style="font-weight: 500;">${transaction.description}</div>
                        <small style="color: var(--text-secondary);">${new Date(transaction.date).toLocaleDateString('te-IN')}</small>
                    </div>
                    <div class="${transaction.type === 'income' ? 'text-success' : 'text-error'}" style="font-weight: bold;">
                        ${transaction.type === 'income' ? '+' : '-'}‚Çπ${transaction.amount.toLocaleString('en-IN')}
                    </div>
                </div>
            `).join('');
        }

        // Quick transaction functions
        function addQuickTransaction(type) {
            document.getElementById('transactionType').value = type;
            updateTransactionCategories();
            document.getElementById('transactionDate').value = new Date().toISOString().split('T')[0];
            showAddTransactionModal();
        }

        function showTransactionHistory() {
            const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
            const content = document.getElementById('transactionHistoryContent');
            
            if (transactions.length === 0) {
                content.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-coins"></i>
                        <h3>‡∞á‡∞Ç‡∞ï‡∞æ ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞≤‡±Å ‡∞∞‡∞ø‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å</h3>
                        <p>‡∞Æ‡±Ä ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞Ü‡∞∞‡±ç‡∞•‡∞ø‡∞ï ‡∞ï‡∞æ‡∞∞‡±ç‡∞Ø‡∞ï‡∞≤‡∞æ‡∞™‡∞æ‡∞≤‡∞®‡±Å ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡±Ä ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞®‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.</p>
                        <button class="btn btn-primary" onclick="addQuickTransaction('expense'); closeModal('transactionHistoryModal');">
                            <i class="fas fa-plus"></i> ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                        </button>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${transactions.reverse().map(transaction => `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid var(--border-color);">
                                <div>
                                    <div style="font-weight: 500; margin-bottom: 0.25rem;">${transaction.description}</div>
                                    <small style="color: var(--text-secondary);">
                                        ${new Date(transaction.date).toLocaleDateString('te-IN')} ‚Ä¢ 
                                        ${transaction.category.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}
                                    </small>
                                    ${transaction.contact ? `<br><small style="color: var(--text-secondary);">üìû ${transaction.contact}</small>` : ''}
                                </div>
                                <div class="${transaction.type === 'income' ? 'text-success' : 'text-error'}" style="font-weight: bold; font-size: 1.1rem;">
                                    ${transaction.type === 'income' ? '+' : '-'}‚Çπ${transaction.amount.toLocaleString('en-IN')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="addQuickTransaction('expense'); closeModal('transactionHistoryModal');">
                            <i class="fas fa-plus"></i> ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                        </button>
                    </div>
                `;
            }
            
            document.getElementById('transactionHistoryModal').classList.add('active');
        }

        // Crop Management Functions
        function loadCrops() {
            const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
            displayCrops(crops);
            loadCropsIntoDropdowns();
        }

        function loadCropsIntoDropdowns() {
            const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
            const cropSelects = document.querySelectorAll('#transactionCropId');
            
            cropSelects.forEach(select => {
                if (select) {
                    select.innerHTML = '<option value="">‡∞™‡∞Ç‡∞ü ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>' +
                        crops.map(crop => `<option value="${crop.id}">${getCropEmoji(crop.name)} ${crop.name.charAt(0).toUpperCase() + crop.name.slice(1)} - ${crop.variety || 'Standard'}</option>`).join('');
                }
            });
        }

        function displayCrops(crops) {
            const cropGrid = document.getElementById('cropGrid');
            
            if (crops.length === 0) {
                cropGrid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-seedling"></i>
                        <h3>‡∞á‡∞Ç‡∞ï‡∞æ ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å</h3>
                        <p>‡∞Æ‡±Ä ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞™‡±ç‡∞∞‡∞Ø‡∞æ‡∞£‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞Æ‡±Ä ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞™‡∞Ç‡∞ü‡∞®‡±Å ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞°‡∞Ç ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø. ‡∞µ‡±É‡∞¶‡±ç‡∞ß‡∞ø‡∞®‡∞ø ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø, ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡∞®‡±Å ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Æ‡±Ä ‡∞™‡∞Ç‡∞ü ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø‡∞®‡∞ø ‡∞ó‡∞∞‡∞ø‡∞∑‡±ç‡∞ü‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.</p>
                        <button class="btn btn-primary btn-large" onclick="showAddCropModal()">
                            <i class="fas fa-plus"></i> ‡∞Æ‡±Ä ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                        </button>
                    </div>
                `;
                return;
            }
            
            cropGrid.innerHTML = crops.map(crop => {
                const progress = calculateCropProgress(crop);
                const relatedTransactions = getRelatedTransactions(crop.id, 'crop');
                const totalExpenses = relatedTransactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
                const totalIncome = relatedTransactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
                
                return `
                    <div class="card crop-card">
                        <img src="${crop.imageUrl || getCropImage(crop.name)}" alt="${crop.name}" class="crop-image" onerror="this.src='${getCropImage(crop.name)}'">
                        
                        <div class="crop-header">
                            <div class="crop-name">
                                ${getCropEmoji(crop.name)} ${crop.name.charAt(0).toUpperCase() + crop.name.slice(1)}
                                ${crop.variety ? `<small style="color: var(--text-secondary);"> (${crop.variety})</small>` : ''}
                            </div>
                            <div class="status-badge status-${crop.status}">${getStatusText(crop.status)}</div>
                        </div>
                        
                        <div class="crop-info">
                            <div><i class="fas fa-map-marker-alt"></i> <strong>‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç:</strong> ${crop.location || '‡∞™‡±á‡∞∞‡±ç‡∞ï‡±ä‡∞®‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å'}</div>
                            <div><i class="fas fa-calendar-alt"></i> <strong>‡∞µ‡±ç‡∞Ø‡∞µ‡∞ß‡∞ø:</strong> ${crop.season || 0} ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</div>
                            <div><i class="fas fa-ruler-combined"></i> <strong>‡∞µ‡±à‡∞∂‡∞æ‡∞≤‡±ç‡∞Ø‡∞Ç:</strong> ${crop.area} ‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å</div>
                            <div><i class="fas fa-calendar-check"></i> <strong>‡∞ï‡±ã‡∞§ ‡∞§‡±á‡∞¶‡±Ä:</strong> ${new Date(crop.expectedHarvest).toLocaleDateString('te-IN')}</div>
                        </div>
                        
                        ${crop.status === 'active' ? `
                            <div class="crop-progress">
                                <div class="crop-progress-label">
                                    <span><i class="fas fa-chart-line"></i> ‡∞µ‡±É‡∞¶‡±ç‡∞ß‡∞ø ‡∞™‡±Å‡∞∞‡±ã‡∞ó‡∞§‡∞ø</span>
                                    <span><strong>${progress}%</strong></span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar" style="width: ${progress}%"></div>
                                </div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                    ${getDaysRemaining(crop.expectedHarvest)} ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±Å ‡∞Æ‡∞ø‡∞ó‡∞ø‡∞≤‡∞ø ‡∞â‡∞®‡±ç‡∞®‡∞æ‡∞Ø‡∞ø
                                </div>
                            </div>
                        ` : ''}
                        
                        <!-- Weather forecast for crop -->
                        <div class="crop-weather">
                            <div class="crop-weather-title">‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ</div>
                            <div class="weather-forecast" id="cropWeather_${crop.id}">
                                <!-- Weather will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Action buttons -->
                        <div class="crop-actions">
                            <button class="btn btn-info btn-large" onclick="viewCropDetails('${crop.id}')">
                                <i class="fas fa-eye"></i> ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø
                            </button>
                            <button class="btn btn-warning btn-large" onclick="quickAddTransaction('${crop.id}', 'crop')">
                                <i class="fas fa-receipt"></i> ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä
                            </button>
                            <button class="btn btn-primary btn-large" onclick="viewTransactions('${crop.id}')">
                                <i class="fas fa-history"></i> ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞
                            </button>
                            ${crop.status === 'active' ? `
                                <button class="btn btn-success btn-large harvest-btn" onclick="showHarvestModal('${crop.id}')">
                                    <i class="fas fa-cut"></i> ‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            // Load weather for each crop
            crops.forEach(crop => {
                if (crop.status === 'active') {
                    loadCropWeather(crop.id);
                }
            });
        }

        function getStatusText(status) {
            const statusTexts = {
                'active': '‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞æ‡∞∂‡±Ä‡∞≤',
                'harvested': '‡∞ï‡±ã‡∞§ ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø', 
                'planned': '‡∞™‡±ç‡∞∞‡∞£‡∞æ‡∞≥‡∞ø‡∞ï'
            };
            return statusTexts[status] || status;
        }

        async function loadCropWeather(cropId) {
            try {
                // Get 5-day forecast
                const forecastData = await fetch(`${WEATHER_API_BASE}/forecast?q=${userLocation ? `${userLocation.lat},${userLocation.lng}` : 'Delhi,IN'}&appid=${WEATHER_API_KEY}&units=metric`);
                const forecast = await forecastData.json();
                
                const weatherContainer = document.getElementById(`cropWeather_${cropId}`);
                if (weatherContainer && forecast.list) {
                    const dailyForecast = forecast.list.filter((item, index) => index % 8 === 0).slice(0, 5);
                    
                    weatherContainer.innerHTML = dailyForecast.map((day, index) => {
                        const date = new Date(day.dt * 1000);
                        const dayName = ['‡∞Ü‡∞¶‡∞ø', '‡∞∏‡±ã‡∞Æ', '‡∞Æ‡∞Ç‡∞ó‡∞≥', '‡∞¨‡±Å‡∞ß', '‡∞ó‡±Å‡∞∞‡±Å', '‡∞∂‡±Å‡∞ï‡±ç‡∞∞', '‡∞∂‡∞®‡∞ø'][date.getDay()];
                        const rainChance = Math.min(day.pop * 100, 100);
                        const temp = Math.round(day.main.temp);
                        
                        return `
                            <div class="forecast-day">
                                <div style="font-weight: 500;">${index === 0 ? '‡∞à‡∞∞‡±ã‡∞ú‡±Å' : dayName}</div>
                                <i class="${getWeatherIcon(day.weather[0].main.toLowerCase())}"></i>
                                <div>${temp}¬∞C</div>
                                <div class="rain-chance">
                                    <i class="fas fa-tint"></i> ${rainChance.toFixed(0)}%
                                </div>
                            </div>
                        `;
                    }).join('');
                }
            } catch (error) {
                console.log('Error loading crop weather:', error);
            }
        }

        function getWeatherIcon(condition) {
            const icons = {
                clear: 'fas fa-sun',
                clouds: 'fas fa-cloud',
                rain: 'fas fa-cloud-rain',
                drizzle: 'fas fa-cloud-drizzle',
                thunderstorm: 'fas fa-bolt',
                snow: 'fas fa-snowflake',
                mist: 'fas fa-smog',
                fog: 'fas fa-smog'
            };
            return icons[condition] || 'fas fa-sun';
        }

        function getCropImage(cropName) {
            const images = {
                rice: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400&h=300&fit=crop&auto=format&q=60',
                wheat: 'https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=400&h=300&fit=crop&auto=format&q=60',
                corn: 'https://images.unsplash.com/photo-1551754655-cd27e38d2076?w=400&h=300&fit=crop&auto=format&q=60',
                tobacco: 'https://images.unsplash.com/photo-1544968503-7342988bbc7f?w=400&h=300&fit=crop&auto=format&q=60',
                cotton: 'https://images.unsplash.com/photo-1592085189859-b372d7d7d1d6?w=400&h=300&fit=crop&auto=format&q=60',
                sugarcane: 'https://images.unsplash.com/photo-1571115764595-644a1f56a55c?w=400&h=300&fit=crop&auto=format&q=60',
                vegetables: 'https://images.unsplash.com/photo-1566385101042-1a0aa0c1268c?w=400&h=300&fit=crop&auto=format&q=60',
                fruits: 'https://images.unsplash.com/photo-1610832958506-aa56368176cf?w=400&h=300&fit=crop&auto=format&q=60',
                pulses: 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=300&fit=crop&auto=format&q=60'
            };
            return images[cropName] || 'https://images.unsplash.com/photo-1625246333195-78d9c38ad449?w=400&h=300&fit=crop&auto=format&q=60';
        }

        function getCropEmoji(cropName) {
            const emojis = {
                rice: 'üåæ',
                wheat: 'üåæ',
                corn: 'üåΩ',
                tobacco: 'üö¨',
                cotton: 'üåø',
                sugarcane: 'üéã',
                pulses: 'ü´ò',
                vegetables: 'ü•ï',
                fruits: 'üçé'
            };
            return emojis[cropName] || 'üå±';
        }

        function calculateCropProgress(crop) {
            if (crop.status !== 'active') return 100;
            
            const sowingDate = new Date(crop.sowingDate);
            const harvestDate = new Date(crop.expectedHarvest);
            const today = new Date();
            
            const totalDays = (harvestDate - sowingDate) / (1000 * 60 * 60 * 24);
            const daysPassed = (today - sowingDate) / (1000 * 60 * 60 * 24);
            
            const progress = Math.min(Math.max((daysPassed / totalDays) * 100, 0), 100);
            return Math.round(progress);
        }

        function getDaysRemaining(harvestDate) {
            const today = new Date();
            const harvest = new Date(harvestDate);
            const daysRemaining = Math.ceil((harvest - today) / (1000 * 60 * 60 * 24));
            return Math.max(daysRemaining, 0);
        }

        function getRelatedTransactions(itemId, type) {
            const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
            const fieldName = type === 'crop' ? 'cropId' : 'assetId';
            return transactions.filter(t => t[fieldName] === itemId);
        }

        function showAddCropModal() {
            document.getElementById('addCropModal').classList.add('active');
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('sowingDate').value = today;
            
            // Set default location from user profile or current location
            const savedUserData = JSON.parse(localStorage.getItem(STORAGE_KEYS.USER_DATA) || '{}');
            if (savedUserData.location) {
                document.getElementById('cropLocation').value = savedUserData.location;
            }
            
            updateExpectedHarvest();
        }

        function updateExpectedHarvest() {
            const sowingDate = document.getElementById('sowingDate').value;
            const durationMonths = parseInt(document.getElementById('cropSeason').value) || 3;
            
            if (sowingDate) {
                const sowing = new Date(sowingDate);
                const harvest = new Date(sowing.getTime() + (durationMonths * 30 * 24 * 60 * 60 * 1000));
                document.getElementById('expectedHarvest').value = harvest.toISOString().split('T')[0];
            }
        }

        function handleAddCrop(e) {
            e.preventDefault();
            
            const isEditing = document.getElementById('addCropForm').dataset.editingId;
            
            // Get area value (from slider or custom input)
            let areaValue;
            if (document.getElementById('useCustomArea').checked) {
                areaValue = parseFloat(document.getElementById('cropAreaCustom').value);
            } else {
                areaValue = parseFloat(document.getElementById('cropAreaSlider').value);
            }
            
            const cropData = {
                id: isEditing || Date.now().toString(),
                name: document.getElementById('cropName').value,
                variety: document.getElementById('cropVariety').value,
                area: areaValue,
                season: document.getElementById('cropSeason').value,
                location: document.getElementById('cropLocation').value,
                sowingDate: document.getElementById('sowingDate').value,
                expectedHarvest: document.getElementById('expectedHarvest').value,
                expectedYield: parseFloat(document.getElementById('expectedYield').value) || 0,
                expectedPrice: parseFloat(document.getElementById('expectedPrice').value) || 0,
                notes: document.getElementById('cropNotes').value,
                status: 'active',
                createdAt: isEditing ? undefined : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // Handle image
            const imageInput = document.getElementById('cropImageInput');
            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    cropData.imageUrl = e.target.result;
                    saveCrop(cropData, isEditing);
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                saveCrop(cropData, isEditing);
            }
        }

        function saveCrop(cropData, isEditing) {
            let crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
            
            if (isEditing) {
                const index = crops.findIndex(c => c.id === isEditing);
                if (index !== -1) {
                    crops[index] = { ...crops[index], ...cropData };
                }
            } else {
                crops.push(cropData);
            }
            
            localStorage.setItem(STORAGE_KEYS.CROPS, JSON.stringify(crops));
            
            // Auto-save to Firebase
            autoSaveToFirebase();
            
            loadCrops();
            closeModal('addCropModal');
            document.getElementById('addCropForm').reset();
            delete document.getElementById('addCropForm').dataset.editingId;
            
            showNotification(
                isEditing ? '‡∞™‡∞Ç‡∞ü ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞®‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! üå±' : '‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡∞Ç‡∞ü ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! üå±', 
                'success'
            );
        }

        function viewCropDetails(cropId) {
            const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
            const crop = crops.find(c => c.id === cropId);
            if (!crop) return;
            
            const relatedTransactions = getRelatedTransactions(cropId, 'crop');
            const totalExpenses = relatedTransactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
            const totalIncome = relatedTransactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
            const netProfit = totalIncome - totalExpenses;
            
            const content = `
                <div class="view-details-content">
                    <div class="crop-header" style="text-align: center; margin-bottom: 2rem;">
                        <img src="${crop.imageUrl || getCropImage(crop.name)}" alt="${crop.name}" style="width: 150px; height: 150px; object-fit: cover; border-radius: 12px; margin-bottom: 1rem;">
                        <h2>${getCropEmoji(crop.name)} ${crop.name.charAt(0).toUpperCase() + crop.name.slice(1)}</h2>
                        <p style="color: var(--text-secondary);">${crop.variety || 'Standard variety'}</p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                        <div>
                            <h3><i class="fas fa-info-circle"></i> ‡∞™‡∞Ç‡∞ü ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç</h3>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç:</strong> ${crop.location}</div>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞µ‡±à‡∞∂‡∞æ‡∞≤‡±ç‡∞Ø‡∞Ç:</strong> ${crop.area} ‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å</div>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞µ‡±ç‡∞Ø‡∞µ‡∞ß‡∞ø:</strong> ${crop.season} ‡∞®‡±Ü‡∞≤‡∞≤‡±Å</div>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø:</strong> <span class="status-badge status-${crop.status}">${getStatusText(crop.status)}</span></div>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤ ‡∞§‡±á‡∞¶‡±Ä:</strong> ${new Date(crop.sowingDate).toLocaleDateString('te-IN')}</div>
                            <div style="padding: 0.5rem 0;"><strong>‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞ï‡±ã‡∞§:</strong> ${new Date(crop.expectedHarvest).toLocaleDateString('te-IN')}</div>
                        </div>
                        
                        <div>
                            <h3><i class="fas fa-chart-line"></i> ‡∞Ü‡∞∞‡±ç‡∞•‡∞ø‡∞ï ‡∞∏‡∞æ‡∞∞‡∞æ‡∞Ç‡∞∂‡∞Ç</h3>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç:</strong> ‚Çπ${((crop.expectedYield || 0) * (crop.expectedPrice || 0)).toLocaleString('en-IN')}</div>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å:</strong> <span class="text-error">‚Çπ${totalExpenses.toLocaleString('en-IN')}</span></div>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç:</strong> <span class="text-success">‚Çπ${totalIncome.toLocaleString('en-IN')}</span></div>
                            <div style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);"><strong>‡∞®‡∞ø‡∞ï‡∞∞ ‡∞≤‡∞æ‡∞≠‡∞Ç:</strong> <span class="${netProfit >= 0 ? 'text-success' : 'text-error'}">‚Çπ${netProfit.toLocaleString('en-IN')}</span></div>
                            <div style="padding: 0.5rem 0;"><strong>ROI:</strong> ${totalExpenses > 0 ? ((netProfit / totalExpenses) * 100).toFixed(1) + '%' : 'N/A'}</div>
                        </div>
                    </div>
                    
                    ${relatedTransactions.length > 0 ? `
                        <div style="margin-top: 2rem;">
                            <h3><i class="fas fa-list"></i> ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞∞‡∞ø‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±ç‡∞∏‡±ç (${relatedTransactions.length} ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞≤‡±Å)</h3>
                            <div style="max-height: 300px; overflow-y: auto; margin-top: 1rem;">
                                ${relatedTransactions.map(t => `
                                    <div style="padding: 0.75rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-weight: 500;">${t.description}</div>
                                            <small style="color: var(--text-secondary);">${new Date(t.date).toLocaleDateString('te-IN')} ‚Ä¢ ${t.category.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</small>
                                            ${t.contact ? `<small style="display: block; color: var(--text-secondary);">üìû ${t.contact}</small>` : ''}
                                        </div>
                                        <div class="${t.type === 'income' ? 'text-success' : 'text-error'}" style="font-weight: bold; font-size: 1.1rem;">
                                            ${t.type === 'income' ? '+' : '-'}‚Çπ${t.amount.toLocaleString('en-IN')}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : '<p style="text-align: center; color: var(--text-secondary); margin-top: 2rem;">‡∞à ‡∞™‡∞Ç‡∞ü ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞á‡∞Ç‡∞ï‡∞æ ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞≤‡±Å ‡∞∞‡∞ø‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å.</p>'}
                    
                    ${crop.notes ? `
                        <div style="margin-top: 2rem;">
                            <h3><i class="fas fa-sticky-note"></i> ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï‡∞≤‡±Å</h3>
                            <p style="background: rgba(46, 125, 50, 0.05); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">${crop.notes}</p>
                        </div>
                    ` : ''}
                    
                    <div style="margin-top: 2rem; text-align: center;">
                        <button class="btn btn-primary" onclick="quickAddTransaction('${crop.id}', 'crop'); closeModal('viewDetailsModal');" style="margin-right: 0.5rem;">
                            <i class="fas fa-plus"></i> ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                        </button>
                        <button class="btn btn-warning" onclick="editCrop('${crop.id}'); closeModal('viewDetailsModal');">
                            <i class="fas fa-edit"></i> ‡∞™‡∞Ç‡∞ü ‡∞∏‡∞µ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('viewDetailsTitle').innerHTML = `<i class="fas fa-seedling"></i> ‡∞™‡∞Ç‡∞ü ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å`;
            document.getElementById('viewDetailsContent').innerHTML = content;
            document.getElementById('viewDetailsModal').classList.add('active');
        }

        function showHarvestModal(cropId) {
            const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
            const crop = crops.find(c => c.id === cropId);
            if (!crop) return;
            
            document.getElementById('harvestCropId').value = cropId;
            
            // Pre-fill with expected values
            document.getElementById('harvestQuantity').value = crop.expectedYield || '';
            document.getElementById('pricePerUnit').value = crop.expectedPrice || '';
            
            document.getElementById('harvestModal').classList.add('active');
            calculateHarvestTotal();
        }

        function calculateHarvestTotal() {
            const quantity = parseFloat(document.getElementById('harvestQuantity').value) || 0;
            const pricePerUnit = parseFloat(document.getElementById('pricePerUnit').value) || 0;
            const total = quantity * pricePerUnit;
            
            document.getElementById('totalSaleAmount').value = total.toFixed(2);
        }

        function handleHarvest(e) {
            e.preventDefault();
            
            const cropId = document.getElementById('harvestCropId').value;
            const quantity = parseFloat(document.getElementById('harvestQuantity').value);
            const unit = document.getElementById('harvestUnit').value;
            const pricePerUnit = parseFloat(document.getElementById('pricePerUnit').value);
            const totalAmount = parseFloat(document.getElementById('totalSaleAmount').value);
            const buyerContact = document.getElementById('buyerContact').value;
            const notes = document.getElementById('harvestNotes').value;
            
            // Update crop status
            const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
            const cropIndex = crops.findIndex(c => c.id === cropId);
            if (cropIndex !== -1) {
                crops[cropIndex].status = 'harvested';
                crops[cropIndex].harvestDate = new Date().toISOString().split('T')[0];
                crops[cropIndex].actualYield = quantity;
                crops[cropIndex].actualPrice = pricePerUnit;
                crops[cropIndex].harvestNotes = notes;
                localStorage.setItem(STORAGE_KEYS.CROPS, JSON.stringify(crops));
            }
            
            // Add income transaction
            const transaction = {
                id: Date.now().toString(),
                type: 'income',
                category: 'crop-sale',
                description: `${crops[cropIndex].name.charAt(0).toUpperCase() + crops[cropIndex].name.slice(1)} ‡∞ï‡±ã‡∞§ ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞Ç - ${quantity} ${unit}`,
                amount: totalAmount,
                date: new Date().toISOString().split('T')[0],
                paymentMethod: 'cash',
                cropId: cropId,
                contact: buyerContact,
                notes: notes,
                createdAt: new Date().toISOString()
            };
            
            const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
            transactions.push(transaction);
            localStorage.setItem(STORAGE_KEYS.TRANSACTIONS, JSON.stringify(transactions));
            
            // Auto-save to Firebase
            autoSaveToFirebase();
            
            loadCrops();
            updateDashboardStats();
            loadRecentTransactions();
            closeModal('harvestModal');
            document.getElementById('harvestForm').reset();
            
            showNotification(`üéâ ‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø! ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞™‡±Å ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç: ‚Çπ${totalAmount.toLocaleString('en-IN')}`, 'success');
        }

        function quickAddTransaction(itemId, type) {
            showAddTransactionModal();
            if (type === 'crop') {
                document.getElementById('transactionCropId').value = itemId;
            } else if (type === 'asset') {
                document.getElementById('transactionAssetId').value = itemId;
            }
        }

        function filterCrops() {
            const statusFilter = document.getElementById('cropStatusFilter').value;
            const seasonFilter = document.getElementById('cropSeasonFilter').value;
            const searchFilter = document.getElementById('cropSearchFilter').value.toLowerCase();
            
            const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
            
            const filteredCrops = crops.filter(crop => {
                const matchesStatus = !statusFilter || crop.status === statusFilter;
                const matchesSeason = !seasonFilter || crop.season === seasonFilter;
                const matchesSearch = !searchFilter || 
                    crop.name.toLowerCase().includes(searchFilter) ||
                    (crop.variety && crop.variety.toLowerCase().includes(searchFilter)) ||
                    crop.location.toLowerCase().includes(searchFilter);
                
                return matchesStatus && matchesSeason && matchesSearch;
            });
            
            displayCrops(filteredCrops);
        }

        // Transaction Management Functions
        function showAddTransactionModal() {
            document.getElementById('addTransactionModal').classList.add('active');
            document.getElementById('transactionDate').value = new Date().toISOString().split('T')[0];
            loadCropsIntoDropdowns();
        }

        function updateTransactionCategories() {
            const type = document.getElementById('transactionType').value;
            const categorySelect = document.getElementById('transactionCategory');
            
            let categories = [];
            if (type === 'income') {
                categories = [
                    { value: 'crop-sale', label: 'üåæ ‡∞™‡∞Ç‡∞ü ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞Ç / Crop Sale / ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä' },
                    { value: 'livestock-sale', label: 'üêÑ ‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤ ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞Ç / Livestock Sale / ‡§™‡§∂‡•Å ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä' },
                    { value: 'milk-sale', label: 'ü•õ ‡∞™‡∞æ‡∞≤ ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ï‡∞Ç / Milk Sale / ‡§¶‡•Ç‡§ß ‡§ï‡•Ä ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä' },
                    { value: 'equipment-rent', label: 'üöú ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤ ‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü / Equipment Rent / ‡§â‡§™‡§ï‡§∞‡§£ ‡§ï‡§ø‡§∞‡§æ‡§Ø‡§æ' },
                    { value: 'land-rent', label: 'üåæ ‡∞≠‡±Ç‡∞Æ‡∞ø ‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü / Land Rent / ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡§ø‡§∞‡§æ‡§Ø‡§æ' },
                    { value: 'government-subsidy', label: 'üèõÔ∏è ‡∞™‡±ç‡∞∞‡∞≠‡±Å‡∞§‡±ç‡∞µ ‡∞∞‡∞æ‡∞Ø‡∞ø‡∞§‡±Ä / Government Subsidy / ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä' },
                    { value: 'other-income', label: 'üí∞ ‡∞á‡∞§‡∞∞ ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç / Other Income / ‡§Ö‡§®‡•ç‡§Ø ‡§Ü‡§Ø' }
                ];
            } else if (type === 'expense') {
                categories = [
                    { value: 'seeds', label: 'üå± ‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤‡±Å / Seeds / ‡§¨‡•Ä‡§ú' },
                    { value: 'fertilizers', label: 'üß™ ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å / Fertilizers / ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï' },
                    { value: 'pesticides', label: 'ü™≤ ‡∞ï‡±Ä‡∞ü‡∞®‡∞æ‡∞∂‡∞ï‡∞æ‡∞≤‡±Å / Pesticides / ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï' },
                    { value: 'equipment', label: 'üöú ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å / Equipment / ‡§â‡§™‡§ï‡§∞‡§£' },
                    { value: 'labor', label: 'üë®‚Äçüåæ ‡∞ï‡∞æ‡∞∞‡±ç‡∞Æ‡∞ø‡∞ï‡±Å‡∞≤‡±Å / Labor / ‡§Æ‡§ú‡§¶‡•Ç‡§∞' },
                    { value: 'fuel', label: '‚õΩ ‡∞á‡∞Ç‡∞ß‡∞®‡∞Ç / Fuel / ‡§à‡§Ç‡§ß‡§®' },
                    { value: 'irrigation', label: 'üíß ‡∞®‡±Ä‡∞ü‡∞ø‡∞™‡∞æ‡∞∞‡±Å‡∞¶‡∞≤ / Irrigation / ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à' },
                    { value: 'transportation', label: 'üöö ‡∞∞‡∞µ‡∞æ‡∞£‡∞æ / Transportation / ‡§™‡§∞‡§ø‡§µ‡§π‡§®' },
                    { value: 'feed', label: 'üåæ ‡∞™‡∞∂‡±Å ‡∞Ü‡∞π‡∞æ‡∞∞‡∞Ç / Animal Feed / ‡§™‡§∂‡•Å ‡§Ü‡§π‡§æ‡§∞' },
                    { value: 'veterinary', label: 'üíâ ‡∞™‡∞∂‡±Å ‡∞µ‡±à‡∞¶‡±ç‡∞Ø‡∞Ç / Veterinary / ‡§™‡§∂‡•Å ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ' },
                    { value: 'loan-payment', label: 'üè¶ ‡∞∞‡±Å‡∞£‡∞Ç ‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞™‡±Å / Loan Payment / ‡§ã‡§£ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®' },
                    { value: 'maintenance', label: 'üîß ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ / Maintenance / ‡§∞‡§ñ‡§∞‡§ñ‡§æ‡§µ' },
                    { value: 'other-expense', label: 'üí≥ ‡∞á‡∞§‡∞∞ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å / Other Expense / ‡§Ö‡§®‡•ç‡§Ø ‡§ñ‡§∞‡•ç‡§ö' }
                ];
            }
            
            categorySelect.innerHTML = '<option value="">‡∞µ‡∞∞‡±ç‡∞ó‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>' +
                categories.map(cat => `<option value="${cat.value}">${cat.label}</option>`).join('');
        }

        function handleAddTransaction(e) {
            e.preventDefault();
            
            const isEditing = document.getElementById('addTransactionForm').dataset.editingId;
            const transactionData = {
                id: isEditing || Date.now().toString(),
                type: document.getElementById('transactionType').value,
                category: document.getElementById('transactionCategory').value,
                description: document.getElementById('transactionDescription').value,
                amount: parseFloat(document.getElementById('transactionAmount').value),
                date: document.getElementById('transactionDate').value,
                paymentMethod: document.getElementById('transactionPaymentMethod').value,
                cropId: document.getElementById('transactionCropId').value || null,
                contact: document.getElementById('transactionContact').value,
                notes: document.getElementById('transactionNotes').value,
                createdAt: isEditing ? undefined : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            let transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
            
            if (isEditing) {
                const index = transactions.findIndex(t => t.id === isEditing);
                if (index !== -1) {
                    transactions[index] = { ...transactions[index], ...transactionData };
                }
            } else {
                transactions.push(transactionData);
            }
            
            localStorage.setItem(STORAGE_KEYS.TRANSACTIONS, JSON.stringify(transactions));
            
            // Auto-save to Firebase
            autoSaveToFirebase();
            
            updateDashboardStats();
            loadRecentTransactions();
            loadCrops(); // Refresh to show updated related transactions
            closeModal('addTransactionModal');
            document.getElementById('addTransactionForm').reset();
            delete document.getElementById('addTransactionForm').dataset.editingId;
            
            const emoji = transactionData.type === 'income' ? 'üí∞' : 'üí≥';
            showNotification(
                `${emoji} ${isEditing ? '‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞®‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø' : '‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø'} ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ!`, 
                'success'
            );
        }

        // Asset Management Functions
        function loadAssets() {
            const assets = JSON.parse(localStorage.getItem(STORAGE_KEYS.ASSETS) || '[]');
            displayAssets(assets);
            updateAssetCounts(assets);
        }

        function displayAssets(assets) {
            const assetsList = document.getElementById('assetsList');
            
            if (assets.length === 0) {
                assetsList.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-tractor"></i>
                        <h3>‡∞á‡∞Ç‡∞ï‡∞æ ‡∞Ü‡∞∏‡±ç‡∞§‡±Å‡∞≤‡±Å ‡∞∞‡∞ø‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å</h3>
                        <p>‡∞Æ‡±Ä ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å, ‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤‡±Å, ‡∞≠‡±Ç‡∞Æ‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞≠‡∞Ç‡∞°‡∞æ‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞Æ‡∞Ç‡∞ö‡∞ø‡∞ó‡∞æ ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å ‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞Ç‡∞°‡∞ø.</p>
                        <button class="btn btn-primary btn-large" onclick="showAddAssetModal()">
                            <i class="fas fa-plus"></i> ‡∞Æ‡±Ä ‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø
                        </button>
                    </div>
                `;
                return;
            }
            
            assetsList.innerHTML = assets.map(asset => {
                const currentValue = calculateCurrentValue(asset);
                const relatedTransactions = getRelatedTransactions(asset.id, 'asset');
                const totalExpenses = relatedTransactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
                const totalIncome = relatedTransactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
                
                return `
                    <div class="card crop-card">
                        ${asset.type === 'inventory' && asset.quantity ? `
                            <div class="inventory-counter">${asset.quantity}</div>
                        ` : ''}
                        
                        <div class="crop-header">
                            <div>
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <i class="${getAssetIcon(asset.type)}" style="color: var(--primary-color); font-size: 2rem;"></i>
                                    <h3 style="margin: 0;">${asset.name}</h3>
                                </div>
                                <div style="font-size: 0.9rem; color: var(--text-secondary); text-transform: capitalize;">${getAssetTypeName(asset.type)}</div>
                            </div>
                            <div class="asset-value" style="text-align: right;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);">‚Çπ${currentValue.toLocaleString('en-IN')}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞µ‡∞ø‡∞≤‡±Å‡∞µ</div>
                            </div>
                        </div>
                        
                        ${asset.purchaseDate ? `
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem;">
                                <i class="fas fa-calendar"></i> ‡∞ï‡±ä‡∞®‡±Å‡∞ó‡±ã‡∞≤‡±Å: ${new Date(asset.purchaseDate).toLocaleDateString('te-IN')}
                            </div>
                        ` : ''}
                        
                        ${getAssetDetails(asset)}
                        
                        <div class="crop-actions">
                            <button class="btn btn-info btn-large" onclick="viewAssetDetails('${asset.id}')">
                                <i class="fas fa-eye"></i> ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø
                            </button>
                            <button class="btn btn-warning btn-large" onclick="quickAddTransaction('${asset.id}', 'asset')">
                                <i class="fas fa-receipt"></i> ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä
                            </button>
                            <button class="btn btn-primary btn-large" onclick="viewTransactions('${asset.id}')">
                                <i class="fas fa-history"></i> ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getAssetDetails(asset) {
            switch(asset.type) {
                case 'equipment':
                    return `
                        <div class="crop-info" style="background: rgba(46, 125, 50, 0.05); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
                            <div style="margin-bottom: 0.5rem;"><strong>üîß ‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø:</strong> ${getConditionText(asset.condition || 'good')}</div>
                            ${asset.workHours ? `<div style="margin-bottom: 0.5rem;"><strong>‚è±Ô∏è ‡∞∞‡±ã‡∞ú‡±Å‡∞µ‡∞æ‡∞∞‡±Ä ‡∞™‡∞®‡∞ø ‡∞ó‡∞Ç‡∞ü‡∞≤‡±Å:</strong> ${asset.workHours}‡∞ó‡∞Ç</div>` : ''}
                            ${asset.maintenanceCost ? `<div><strong>üí∞ ‡∞µ‡∞æ‡∞∞‡±ç‡∞∑‡∞ø‡∞ï ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£:</strong> ‚Çπ${asset.maintenanceCost.toLocaleString('en-IN')}</div>` : ''}
                        </div>
                    `;
                case 'livestock':
                    return `
                        <div class="crop-info" style="background: rgba(46, 125, 50, 0.05); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
                            <div style="margin-bottom: 0.5rem;"><strong>üî¢ ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï:</strong> ${asset.count || 1}</div>
                            ${asset.breed ? `<div style="margin-bottom: 0.5rem;"><strong>üêÑ ‡∞ú‡∞æ‡∞§‡∞ø:</strong> ${asset.breed}</div>` : ''}
                            <div style="margin-bottom: 0.5rem;"><strong>üíö ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç:</strong> <span class="text-${asset.health === 'healthy' ? 'success' : 'warning'}">${getHealthText(asset.health || 'healthy')}</span></div>
                            ${asset.milkProduction ? `<div style="margin-bottom: 0.5rem;"><strong>ü•õ ‡∞¶‡±à‡∞®‡∞ø‡∞ï ‡∞™‡∞æ‡∞≤‡±Å:</strong> ${asset.milkProduction}L</div>` : ''}
                            ${asset.feedCostDaily ? `<div><strong>üåæ ‡∞¶‡±à‡∞®‡∞ø‡∞ï ‡∞Ü‡∞π‡∞æ‡∞∞ ‡∞ß‡∞∞:</strong> ‚Çπ${asset.feedCostDaily}</div>` : ''}
                        </div>
                    `;
                case 'land':
                    return `
                        <div class="crop-info" style="background: rgba(46, 125, 50, 0.05); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
                            <div style="margin-bottom: 0.5rem;"><strong>üìè ‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç:</strong> ${asset.size || 0} ‡∞é‡∞ï‡∞∞‡∞æ‡∞≤‡±Å</div>
                            <div style="margin-bottom: 0.5rem;"><strong>üè† ‡∞∞‡∞ï‡∞Ç:</strong> ${getLandTypeText(asset.landType || 'owned')}</div>
                            ${asset.annualRent ? `<div><strong>üí∞ ‡∞µ‡∞æ‡∞∞‡±ç‡∞∑‡∞ø‡∞ï ‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü:</strong> ‚Çπ${asset.annualRent.toLocaleString('en-IN')}</div>` : ''}
                        </div>
                    `;
                case 'inventory':
                    const stockLevel = asset.quantity || 0;
                    const minLevel = asset.minStockLevel || 0;
                    const maxLevel = asset.maxStockLevel || 100;
                    const stockStatus = stockLevel <= minLevel ? '‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç' : stockLevel >= maxLevel ? '‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç' : '‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£';
                    const stockColor = stockLevel <= minLevel ? 'text-error' : stockLevel >= maxLevel ? 'text-warning' : 'text-success';
                    
                    return `
                        <div class="crop-info" style="background: rgba(46, 125, 50, 0.05); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
                            <div style="margin-bottom: 0.5rem;"><strong>üì¶ ‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç:</strong> ${stockLevel} ${asset.unit || 'units'}</div>
                            <div style="margin-bottom: 0.5rem;"><strong>‚ö†Ô∏è ‡∞ï‡∞®‡∞ø‡∞∑‡±ç‡∞ü ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø:</strong> ${minLevel} ${asset.unit || 'units'}</div>
                            <div style="margin-bottom: 0.5rem;"><strong>üìà ‡∞ó‡∞∞‡∞ø‡∞∑‡±ç‡∞ü ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø:</strong> ${maxLevel} ${asset.unit || 'units'}</div>
                            <div><strong>üìä ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø:</strong> <span class="${stockColor}">${stockStatus}</span></div>
                        </div>
                    `;
                default:
                    return '';
            }
        }

        function getAssetTypeName(type) {
            const names = {
                equipment: '‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å',
                livestock: '‡∞™‡∞∂‡±Å‡∞µ‡±Å‡∞≤‡±Å',
                land: '‡∞≠‡±Ç‡∞Æ‡∞ø',
                inventory: '‡∞≠‡∞Ç‡∞°‡∞æ‡∞∞‡∞Ç'
            };
            return names[type] || type;
        }

        function getConditionText(condition) {
            const conditions = {
                excellent: '‡∞Ö‡∞¶‡±ç‡∞≠‡±Å‡∞§‡∞Æ‡±à‡∞®',
                good: '‡∞Æ‡∞Ç‡∞ö‡∞ø',
                fair: '‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£',
                poor: '‡∞ö‡±Ü‡∞°‡±Å'
            };
            return conditions[condition] || condition;
        }

        function getHealthText(health) {
            const healths = {
                healthy: '‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç‡∞ó‡∞æ',
                sick: '‡∞Ö‡∞®‡∞æ‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞Ç',
                recovering: '‡∞ï‡±ã‡∞≤‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±ã‡∞Ç‡∞¶‡∞ø'
            };
            return healths[health] || health;
        }

        function getLandTypeText(landType) {
            const types = {
                owned: '‡∞∏‡±ç‡∞µ‡∞Ç‡∞§‡∞Ç',
                leased: '‡∞≤‡±Ä‡∞ú‡±Å‡∞ï‡±Å ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®',
                rented: '‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü‡∞ï‡±Å ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®'
            };
            return types[landType] || landType;
        }

        function updateAssetCounts(assets) {
            const counts = {
                equipment: assets.filter(a => a.type === 'equipment').length,
                livestock: assets.filter(a => a.type === 'livestock').reduce((sum, a) => sum + (a.count || 1), 0),
                land: assets.filter(a => a.type === 'land').length,
                inventory: assets.filter(a => a.type === 'inventory').length
            };
            
            document.getElementById('equipmentCount').textContent = `${counts.equipment} ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å`;
            document.getElementById('livestockCount').textContent = `${counts.livestock} ‡∞ú‡∞Ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å`;
            document.getElementById('landCount').textContent = `${counts.land} ‡∞™‡±ç‡∞≤‡∞æ‡∞ü‡±ç‡∞≤‡±Å`;
            document.getElementById('inventoryCount').textContent = `${counts.inventory} ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å`;
        }

        function getAssetIcon(type) {
            const icons = {
                equipment: 'fas fa-tractor',
                livestock: 'fas fa-horse',
                land: 'fas fa-map',
                inventory: 'fas fa-boxes'
            };
            return icons[type] || 'fas fa-box';
        }

        function calculateCurrentValue(asset) {
            if (!asset.purchasePrice) return 0;
            
            if (asset.type === 'equipment' && asset.purchaseDate) {
                const years = (new Date().getFullYear() - new Date(asset.purchaseDate).getFullYear());
                const depreciationRate = 0.10;
                return Math.max(asset.purchasePrice * Math.pow(1 - depreciationRate, years), asset.purchasePrice * 0.1);
            }
            
            return asset.purchasePrice;
        }

        function showAddAssetModal() {
            document.getElementById('addAssetModal').classList.add('active');
        }

        function updateAssetFields() {
            const type = document.getElementById('assetType').value;
            
            // Hide all specific fields
            document.querySelectorAll('#equipmentFields, #livestockFields, #landFields, #inventoryFields').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Show relevant fields
            if (type) {
                document.getElementById(`${type}Fields`).classList.remove('hidden');
            }
        }

        function handleAddAsset(e) {
            e.preventDefault();
            
            const isEditing = document.getElementById('addAssetForm').dataset.editingId;
            const assetData = {
                id: isEditing || Date.now().toString(),
                type: document.getElementById('assetType').value,
                name: document.getElementById('assetName').value,
                purchaseDate: document.getElementById('assetPurchaseDate').value,
                purchasePrice: parseFloat(document.getElementById('assetPurchasePrice').value) || 0,
                notes: document.getElementById('assetNotes').value,
                createdAt: isEditing ? undefined : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // Add type-specific data
            if (assetData.type === 'equipment') {
                assetData.condition = document.getElementById('equipmentCondition').value;
                assetData.maintenanceCost = parseFloat(document.getElementById('equipmentMaintenanceCost').value) || 0;
                assetData.workHours = parseFloat(document.getElementById('equipmentWorkHours').value) || 0;
            } else if (assetData.type === 'livestock') {
                assetData.count = parseInt(document.getElementById('animalCount').value) || 1;
                assetData.breed = document.getElementById('animalBreed').value;
                assetData.health = document.getElementById('animalHealth').value;
                assetData.milkProduction = parseFloat(document.getElementById('milkProduction').value) || 0;
                assetData.feedCostDaily = parseFloat(document.getElementById('feedCostDaily').value) || 0;
            } else if (assetData.type === 'land') {
                assetData.size = parseFloat(document.getElementById('landSize').value) || 0;
                assetData.landType = document.getElementById('landType').value;
                assetData.annualRent = parseFloat(document.getElementById('annualRent').value) || 0;
            } else if (assetData.type === 'inventory') {
                assetData.quantity = parseFloat(document.getElementById('inventoryQuantity').value) || 0;
                assetData.unit = document.getElementById('inventoryUnit').value;
                assetData.minStockLevel = parseFloat(document.getElementById('minStockLevel').value) || 0;
                assetData.maxStockLevel = parseFloat(document.getElementById('maxStockLevel').value) || 100;
            }
            
            let assets = JSON.parse(localStorage.getItem(STORAGE_KEYS.ASSETS) || '[]');
            
            if (isEditing) {
                const index = assets.findIndex(a => a.id === isEditing);
                if (index !== -1) {
                    assets[index] = { ...assets[index], ...assetData };
                }
            } else {
                assets.push(assetData);
            }
            
            localStorage.setItem(STORAGE_KEYS.ASSETS, JSON.stringify(assets));
            
            // Auto-save to Firebase
            autoSaveToFirebase();
            
            loadAssets();
            closeModal('addAssetModal');
            document.getElementById('addAssetForm').reset();
            updateAssetFields();
            delete document.getElementById('addAssetForm').dataset.editingId;
            
            showNotification(
                `üèÜ ${isEditing ? '‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞®‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø' : '‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø'} ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ!`, 
                'success'
            );
        }

        function viewAssetDetails(assetId) {
            // Similar to viewCropDetails but for assets
            showNotification('‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø', 'info');
        }

        function filterAssets(type) {
            const assets = JSON.parse(localStorage.getItem(STORAGE_KEYS.ASSETS) || '[]');
            const filteredAssets = type === 'all' ? assets : assets.filter(asset => asset.type === type);
            displayAssets(filteredAssets);
        }

        // Weather Functions
        async function loadWeatherData() {
            try {
                let location = 'Delhi,IN';
                if (userLocation) {
                    location = `${userLocation.lat},${userLocation.lng}`;
                } else {
                    // Try to get location from user profile
                    const userData = JSON.parse(localStorage.getItem(STORAGE_KEYS.USER_DATA) || '{}');
                    if (userData.location) {
                        location = userData.location + ',IN';
                    }
                }
                
                await getWeatherData(location);
                await getForecastData(location);
            } catch (error) {
                console.error('Error loading weather data:', error);
                showSampleWeatherData();
            }
        }

        async function getWeatherData(location) {
            try {
                // Check cache first
                const cached = localStorage.getItem(STORAGE_KEYS.WEATHER_CACHE);
                if (cached) {
                    const cachedData = JSON.parse(cached);
                    const cacheAge = Date.now() - cachedData.timestamp;
                    
                    if (cacheAge < 1800000) { // 30 minutes
                        updateWeatherDisplay(cachedData.data);
                        return;
                    }
                }
                
                const response = await fetch(`${WEATHER_API_BASE}/weather?q=${location}&appid=${WEATHER_API_KEY}&units=metric`);
                
                if (!response.ok) {
                    throw new Error(`Weather API error: ${response.status}`);
                }
                
                const data = await response.json();
                updateWeatherDisplay(data);
                
                // Cache weather data
                localStorage.setItem(STORAGE_KEYS.WEATHER_CACHE, JSON.stringify({
                    data: data,
                    timestamp: Date.now(),
                    location: location
                }));
                
            } catch (error) {
                console.error('Weather API error:', error);
                showSampleWeatherData();
            }
        }

        async function getForecastData(location) {
            try {
                const response = await fetch(`${WEATHER_API_BASE}/forecast?q=${location}&appid=${WEATHER_API_KEY}&units=metric`);
                
                if (!response.ok) {
                    throw new Error(`Forecast API error: ${response.status}`);
                }
                
                const data = await response.json();
                updateForecastDisplay(data);
                
            } catch (error) {
                console.error('Forecast API error:', error);
                showSampleForecastData();
            }
        }

        function updateWeatherDisplay(data) {
            const temp = Math.round(data.main?.temp || 25);
            const description = data.weather?.[0]?.description || 'Clear sky';
            const humidity = data.main?.humidity || 65;
            const windSpeed = Math.round((data.wind?.speed || 5) * 3.6); // Convert m/s to km/h
            const feelsLike = Math.round(data.main?.feels_like || temp + 2);
            const visibility = Math.round((data.visibility || 10000) / 1000); // Convert m to km
            
            // Update current weather display
            document.getElementById('currentWeatherTemp').textContent = `${temp}¬∞C`;
            document.getElementById('currentWeatherDesc').textContent = description.charAt(0).toUpperCase() + description.slice(1);
            document.getElementById('currentWeatherHumidity').textContent = `${humidity}%`;
            document.getElementById('currentWeatherWind').textContent = `${windSpeed} km/h`;
            document.getElementById('currentWeatherFeels').textContent = `${feelsLike}¬∞C`;
            document.getElementById('currentWeatherVisibility').textContent = `${visibility} km`;
            
            // Update weather icon
            updateWeatherIcon((data.weather?.[0]?.main || 'Clear').toLowerCase(), 'currentWeatherIcon');
        }

        function updateForecastDisplay(data) {
            if (!data.list) return;
            
            const dailyForecast = data.list.filter((item, index) => index % 8 === 0).slice(0, 5);
            const forecastContainer = document.getElementById('weatherForecast');
            
            forecastContainer.innerHTML = dailyForecast.map((day, index) => {
                const date = new Date(day.dt * 1000);
                const dayName = ['‡∞Ü‡∞¶‡∞ø', '‡∞∏‡±ã‡∞Æ', '‡∞Æ‡∞Ç‡∞ó‡∞≥', '‡∞¨‡±Å‡∞ß', '‡∞ó‡±Å‡∞∞‡±Å', '‡∞∂‡±Å‡∞ï‡±ç‡∞∞', '‡∞∂‡∞®‡∞ø'][date.getDay()];
                const rainChance = Math.min(day.pop * 100, 100);
                const temp = Math.round(day.main.temp);
                const maxTemp = Math.round(day.main.temp_max);
                const minTemp = Math.round(day.main.temp_min);
                
                return `
                    <div class="card text-center" style="padding: 1rem;">
                        <div style="font-weight: 500; margin-bottom: 0.5rem;">${index === 0 ? '‡∞à‡∞∞‡±ã‡∞ú‡±Å' : dayName}</div>
                        <i class="${getWeatherIcon(day.weather[0].main.toLowerCase())}" style="font-size: 2rem; color: var(--primary-color); margin-bottom: 0.5rem;"></i>
                        <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 0.25rem;">${maxTemp}¬∞/${minTemp}¬∞</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem;">${day.weather[0].description}</div>
                        <div style="background: rgba(33, 150, 243, 0.1); border-radius: 8px; padding: 0.25rem;">
                            <i class="fas fa-tint" style="color: var(--info-color);"></i> ${rainChance.toFixed(0)}%
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateWeatherIcon(condition, elementId) {
            const icons = {
                clear: 'fas fa-sun',
                clouds: 'fas fa-cloud',
                rain: 'fas fa-cloud-rain',
                drizzle: 'fas fa-cloud-drizzle',
                thunderstorm: 'fas fa-bolt',
                snow: 'fas fa-snowflake',
                mist: 'fas fa-smog',
                fog: 'fas fa-smog'
            };
            
            const iconClass = icons[condition] || 'fas fa-sun';
            const weatherIcon = document.getElementById(elementId || 'currentWeatherIcon');
            
            if (weatherIcon) weatherIcon.innerHTML = `<i class="${iconClass}"></i>`;
        }

        function showSampleWeatherData() {
            const temp = 28 + Math.round(Math.random() * 10 - 5);
            const humidity = 60 + Math.round(Math.random() * 30);
            const windSpeed = 5 + Math.round(Math.random() * 15);
            
            document.getElementById('currentWeatherTemp').textContent = `${temp}¬∞C`;
            document.getElementById('currentWeatherDesc').textContent = '‡∞™‡∞æ‡∞ï‡±ç‡∞∑‡∞ø‡∞ï ‡∞Æ‡±á‡∞ò‡∞æ‡∞µ‡±É‡∞§‡∞Ç';
            document.getElementById('currentWeatherHumidity').textContent = `${humidity}%`;
            document.getElementById('currentWeatherWind').textContent = `${windSpeed} km/h`;
            document.getElementById('currentWeatherFeels').textContent = `${temp + 2}¬∞C`;
            document.getElementById('currentWeatherVisibility').textContent = '10 km';
            
            updateWeatherIcon('clouds', 'currentWeatherIcon');
            showSampleForecastData();
        }

        function showSampleForecastData() {
            const forecastContainer = document.getElementById('weatherForecast');
            const days = ['‡∞à‡∞∞‡±ã‡∞ú‡±Å', '‡∞∞‡±á‡∞™‡±Å', '‡∞é‡∞≤‡±ç‡∞≤‡±Å‡∞Ç‡∞°‡∞ø', '‡∞®‡∞æ‡∞≤‡±Å‡∞ó‡±Å', '‡∞ê‡∞¶‡±Å'];
            
            forecastContainer.innerHTML = days.map((day, index) => {
                const maxTemp = 28 + Math.round(Math.random() * 8 - 4);
                const minTemp = maxTemp - Math.round(Math.random() * 8 + 4);
                const rainChance = Math.round(Math.random() * 100);
                
                return `
                    <div class="card text-center" style="padding: 1rem;">
                        <div style="font-weight: 500; margin-bottom: 0.5rem;">${day}</div>
                        <i class="fas fa-${index % 2 === 0 ? 'sun' : 'cloud'}" style="font-size: 2rem; color: var(--primary-color); margin-bottom: 0.5rem;"></i>
                        <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 0.25rem;">${maxTemp}¬∞/${minTemp}¬∞</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem;">${index % 2 === 0 ? '‡∞é‡∞Ç‡∞°‡∞ó‡∞æ' : '‡∞Æ‡±á‡∞ò‡∞æ‡∞µ‡±É‡∞§‡∞Ç'}</div>
                        <div style="background: rgba(33, 150, 243, 0.1); border-radius: 8px; padding: 0.25rem;">
                            <i class="fas fa-tint" style="color: var(--info-color);"></i> ${rainChance}%
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Ideas Section
        function loadIdeasSection() {
            // Ideas content is static in HTML, but we can add dynamic content here
            showNotification('‡∞Ü‡∞≤‡±ã‡∞ö‡∞®‡∞≤‡±Å ‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ç ‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! üí°', 'info');
        }

        // Ideas functions (placeholder implementations)
        function showCropSuggestions() {
            showNotification('‡∞™‡∞Ç‡∞ü ‡∞∏‡∞≤‡∞π‡∞æ‡∞≤‡±Å ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø', 'info');
        }

        function showGovernmentSchemes() {
            showNotification('‡∞™‡±ç‡∞∞‡∞≠‡±Å‡∞§‡±ç‡∞µ ‡∞™‡∞•‡∞ï‡∞æ‡∞≤‡±Å ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø', 'info');
        }

        function showSmartFarmingTips() {
            showNotification('‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞ö‡∞ø‡∞ü‡±ç‡∞ï‡∞æ‡∞≤‡±Å ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø', 'info');
        }

        function showMarketPrices() {
            showNotification('‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞ß‡∞∞‡∞≤‡±Å ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø', 'info');
        }

        function showBudgetPlanner() {
            showNotification('‡∞¨‡∞°‡±ç‡∞ú‡±Ü‡∞ü‡±ç ‡∞™‡±ç‡∞≤‡∞æ‡∞®‡∞∞‡±ç ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø', 'info');
        }

        function showExpertAdvice() {
            showNotification('‡∞®‡∞ø‡∞™‡±Å‡∞£‡±Å‡∞≤ ‡∞∏‡∞≤‡∞π‡∞æ ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø', 'info');
        }

        // Chart Functions
        function initializeCharts() {
            if (document.getElementById('incomeExpenseChart')) {
                createIncomeExpenseChart();
            }
        }

        function createIncomeExpenseChart() {
            const ctx = document.getElementById('incomeExpenseChart');
            if (!ctx) return;
            
            const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
            const monthlyData = processMonthlyTransactions(transactions);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: monthlyData.labels,
                    datasets: [{
                        label: '‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç',
                        data: monthlyData.income,
                        backgroundColor: 'rgba(76, 175, 80, 0.8)',
                        borderColor: 'rgba(76, 175, 80, 1)',
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false,
                    }, {
                        label: '‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å',
                        data: monthlyData.expenses,
                        backgroundColor: 'rgba(244, 67, 54, 0.8)',
                        borderColor: 'rgba(244, 67, 54, 1)',
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                usePointStyle: true,
                                padding: 20
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '‚Çπ' + (value / 1000) + 'K';
                                }
                            }
                        }
                    }
                }
            });
        }

        function processMonthlyTransactions(transactions) {
            const months = ['‡∞ú‡∞®', '‡∞´‡∞ø‡∞¨‡±ç‡∞∞', '‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞ø', '‡∞è‡∞™‡±ç‡∞∞‡∞ø‡∞≤‡±ç', '‡∞Æ‡±á', '‡∞ú‡±Ç‡∞®‡±ç'];
            const income = new Array(6).fill(0);
            const expenses = new Array(6).fill(0);
            
            const now = new Date();
            
            transactions.forEach(transaction => {
                const transactionDate = new Date(transaction.date);
                const monthsAgo = (now.getFullYear() - transactionDate.getFullYear()) * 12 + 
                                 (now.getMonth() - transactionDate.getMonth());
                
                if (monthsAgo >= 0 && monthsAgo < 6) {
                    const index = 5 - monthsAgo;
                    if (transaction.type === 'income') {
                        income[index] += transaction.amount;
                    } else {
                        expenses[index] += transaction.amount;
                    }
                }
            });
            
            return { labels: months, income, expenses };
        }

        // Settings and Profile Functions
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem(STORAGE_KEYS.SETTINGS) || '{}');
            
            if (settings.theme) {
                setTheme(settings.theme);
            }
            
            if (settings.language) {
                changeLanguage(settings.language);
            }
        }

        function saveSettings() {
            const settings = {
                theme: currentTheme,
                language: currentLanguage,
                lastSaved: new Date().toISOString()
            };
            
            localStorage.setItem(STORAGE_KEYS.SETTINGS, JSON.stringify(settings));
        }

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(currentTheme);
        }

        function setTheme(theme) {
            currentTheme = theme;
            document.documentElement.setAttribute('data-theme', theme);
            updateThemeIcon();
            saveSettings();
        }

        function updateThemeIcon() {
            const icon = document.querySelector('#themeToggle i');
            if (icon) {
                icon.className = currentTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
            }
        }

        function changeLanguage(language) {
            currentLanguage = language;
            document.getElementById('languageSelect').value = language;
            document.getElementById('settingsLanguage').value = language;
            
            applyTranslations();
            saveSettings();
        }

        function applyTranslations() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
            
            // Apply placeholder translations
            const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
            placeholderElements.forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.placeholder = translations[currentLanguage][key];
                }
            });
            
            // Apply language-specific CSS classes
            if (currentLanguage === 'hi') {
                document.body.classList.add('hindi-text');
                document.body.classList.remove('telugu-text');
            }  else if (currentLanguage === 'te') {
                document.body.classList.add('telugu-text');
                document.body.classList.remove('hindi-text');
            } else {
                document.body.classList.remove('hindi-text', 'telugu-text');
            }
        }

        async function handleUpdateProfile(e) {
            e.preventDefault();
            
            const profileData = {
                name: document.getElementById('profileName').value,
                email: document.getElementById('profileEmail').value,
                phone: document.getElementById('profilePhone').value,
                location: document.getElementById('profileLocation').value,
                farmSize: parseFloat(document.getElementById('profileFarmSize').value) || 0,
                updatedAt: new Date().toISOString()
            };
            
            try {
                if (currentUser && currentUser.uid) {
                    // Update in Firestore
                    await db.collection('users').doc(currentUser.uid).update(profileData);
                }
                
                
                
                // Update locally
                const userData = JSON.parse(localStorage.getItem(STORAGE_KEYS.USER_DATA) || '{}');
                localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify({...userData, ...profileData}));
                
                showNotification('üë§ ‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞®‡∞µ‡±Ä‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø!', 'success');
                autoSaveToFirebase();
            } catch (error) {
                console.error('Profile update error:', error);
                showNotification('‡∞™‡±ç‡∞∞‡±ä‡∞´‡±à‡∞≤‡±ç ‡∞®‡∞µ‡±Ä‡∞ï‡∞∞‡∞£‡∞≤‡±ã ‡∞≤‡±ã‡∞™‡∞Ç', 'error');
            }
        }

        // Quick Actions Functions
        function showQuickActions() {
            document.getElementById('quickActionsOverlay').style.display = 'flex';
        }

        function closeQuickActions() {
            document.getElementById('quickActionsOverlay').style.display = 'none';
        }

        // Data Management Functions
        async function exportAllData() {
            try {
                showNotification('üìÑ ‡∞∏‡∞Æ‡∞ó‡±ç‡∞∞ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞®‡∞ø‡∞µ‡±á‡∞¶‡∞ø‡∞ï‡∞®‡±Å ‡∞∞‡±Ç‡∞™‡±ä‡∞Ç‡∞¶‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'info');
                
                const userData = JSON.parse(localStorage.getItem(STORAGE_KEYS.USER_DATA) || '{}');
                const crops = JSON.parse(localStorage.getItem(STORAGE_KEYS.CROPS) || '[]');
                const transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
                const assets = JSON.parse(localStorage.getItem(STORAGE_KEYS.ASSETS) || '[]');
                
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                let yPos = 20;
                
                // Header
                doc.setFontSize(24);
                doc.text('JamaApp Farm Report', 20, yPos);
                yPos += 10;
                doc.setFontSize(12);
                doc.text(`Generated on: ${new Date().toLocaleDateString('te-IN')}`, 20, yPos);
                yPos += 20;
                
                // Farm Overview
                doc.setFontSize(16);
                doc.text('Farm Overview', 20, yPos);
                yPos += 10;
                doc.setFontSize(12);
                doc.text(`Farmer: ${userData.name || 'Not specified'}`, 20, yPos);
                yPos += 8;
                doc.text(`Location: ${userData.location || 'Not specified'}`, 20, yPos);
                yPos += 8;
                doc.text(`Farm Size: ${userData.farmSize || 0} acres`, 20, yPos);
                yPos += 15;
                
                // Financial Summary
                const totalIncome = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
                const totalExpenses = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
                
                doc.setFontSize(16);
                doc.text('Financial Summary', 20, yPos);
                yPos += 10;
                doc.setFontSize(12);
                doc.text(`Total Income: Rs.${totalIncome.toLocaleString('en-IN')}`, 20, yPos);
                yPos += 8;
                doc.text(`Total Expenses: Rs.${totalExpenses.toLocaleString('en-IN')}`, 20, yPos);
                yPos += 8;
                doc.text(`Net Profit: Rs.${(totalIncome - totalExpenses).toLocaleString('en-IN')}`, 20, yPos);
                yPos += 8;
                doc.text(`Total Transactions: ${transactions.length}`, 20, yPos);
                yPos += 15;
                
                // Crop Summary
                doc.setFontSize(16);
                doc.text('Crop Summary', 20, yPos);
                yPos += 10;
                doc.setFontSize(12);
                doc.text(`Total Crops: ${crops.length}`, 20, yPos);
                yPos += 8;
                doc.text(`Active Crops: ${crops.filter(c => c.status === 'active').length}`, 20, yPos);
                yPos += 8;
                doc.text(`Harvested Crops: ${crops.filter(c => c.status === 'harvested').length}`, 20, yPos);
                yPos += 15;
                
                // Asset Summary
                doc.setFontSize(16);
                doc.text('Asset Summary', 20, yPos);
                yPos += 10;
                doc.setFontSize(12);
                doc.text(`Total Assets: ${assets.length}`, 20, yPos);
                yPos += 8;
                doc.text(`Equipment: ${assets.filter(a => a.type === 'equipment').length}`, 20, yPos);
                yPos += 8;
                doc.text(`Livestock: ${assets.filter(a => a.type === 'livestock').length}`, 20, yPos);
                yPos += 8;
                doc.text(`Land Plots: ${assets.filter(a => a.type === 'land').length}`, 20, yPos);
                
                // Save the PDF
                doc.save(`JamaApp-Farm-Report-${new Date().toISOString().split('T')[0]}.pdf`);
                showNotification('üìä ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞®‡∞ø‡∞µ‡±á‡∞¶‡∞ø‡∞ï ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞é‡∞ó‡±Å‡∞Æ‡∞§‡∞ø ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø!', 'success');
            } catch (error) {
                console.error('Export error:', error);
                showNotification('‡∞°‡±á‡∞ü‡∞æ ‡∞é‡∞ó‡±Å‡∞Æ‡∞§‡∞ø‡∞≤‡±ã ‡∞≤‡±ã‡∞™‡∞Ç', 'error');
            }
        }

        async function backupData() {
            if (currentUser && currentUser.uid) {
                showNotification('‚òÅÔ∏è ‡∞Æ‡±Ä ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞°‡±á‡∞ü‡∞æ‡∞®‡±Å ‡∞ï‡±ç‡∞≤‡±å‡∞°‡±ç‚Äå‡∞ï‡±Å ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ï‡∞™‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'info');
                await autoSaveToFirebase();
                showNotification('‚úÖ ‡∞°‡±á‡∞ü‡∞æ ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞ï‡±ç‡∞≤‡±å‡∞°‡±ç‚Äå‡∞ï‡±Å ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ï‡∞™‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø!', 'success');
            } else {
                showNotification('‡∞ï‡±ç‡∞≤‡±å‡∞°‡±ç ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ï‡∞™‡±ç ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞∏‡±à‡∞®‡±ç ‡∞á‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø', 'warning');
            }
        }

        function clearAllData() {
            const confirmation = prompt('‚ö†Ô∏è ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞ï: ‡∞á‡∞¶‡∞ø ‡∞Æ‡±Ä ‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞°‡±á‡∞ü‡∞æ‡∞®‡±Å ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø!\n\n‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø "DELETE ALL MY DATA" ‡∞Ö‡∞®‡∞ø ‡∞ü‡±à‡∞™‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø:');
            if (confirmation === 'DELETE ALL MY DATA') {
                Object.values(STORAGE_KEYS).forEach(key => {
                    localStorage.removeItem(key);
                });
                showNotification('üóëÔ∏è ‡∞Ö‡∞®‡±ç‡∞®‡∞ø ‡∞°‡±á‡∞ü‡∞æ ‡∞ï‡±ç‡∞≤‡∞ø‡∞Ø‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! ‡∞∞‡±Ä‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...', 'warning');
                setTimeout(() => {
                    location.reload();
                }, 2000);
            } else {
                showNotification('‚ùå ‡∞°‡±á‡∞ü‡∞æ ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞™‡±Å ‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø', 'info');
            }
        }

        // Utility Functions
        function loadTransactions() {
            // This function is called by other parts but transactions are now managed in dashboard
            return JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS) || '[]');
        }

        function viewTransactions(itemId) {
            const transactions = getRelatedTransactions(itemId, 'crop');
            
            if (transactions.length === 0) {
                showNotification('‡∞à ‡∞™‡∞Ç‡∞ü ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞á‡∞Ç‡∞ï‡∞æ ‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä‡∞≤‡±Å ‡∞≤‡±á‡∞µ‡±Å', 'info');
                return;
            }
            
            const content = `
                <div style="max-height: 400px; overflow-y: auto;">
                    ${transactions.map(transaction => `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid var(--border-color);">
                            <div>
                                <div style="font-weight: 500; margin-bottom: 0.25rem;">${transaction.description}</div>
                                <small style="color: var(--text-secondary);">
                                    ${new Date(transaction.date).toLocaleDateString('te-IN')} ‚Ä¢ 
                                    ${transaction.category.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}
                                </small>
                                ${transaction.contact ? `<br><small style="color: var(--text-secondary);">üìû ${transaction.contact}</small>` : ''}
                            </div>
                            <div class="${transaction.type === 'income' ? 'text-success' : 'text-error'}" style="font-weight: bold; font-size: 1.1rem;">
                                ${transaction.type === 'income' ? '+' : '-'}‚Çπ${transaction.amount.toLocaleString('en-IN')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('transactionHistoryContent').innerHTML = content;
            document.getElementById('transactionHistoryModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            
            // Reset forms
            const form = document.querySelector(`#${modalId} form`);
            if (form) {
                form.reset();
                form.removeAttribute('data-editing-id');
                
                // Reset modal titles and button text
                resetModalTitles(modalId);
            }
            
            // Clear asset fields
            if (modalId === 'addAssetModal') {
                updateAssetFields();
            }
            
            // Reset crop image preview
            if (modalId === 'addCropModal') {
                document.getElementById('cropImagePreview').innerHTML = '<i class="fas fa-camera"></i>';
                toggleCustomArea(); // Reset area input
            }
        }

        function resetModalTitles(modalId) {
            const modalTitles = {
                'addCropModal': { title: '‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø', button: '‡∞™‡∞Ç‡∞ü ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø' },
                'addTransactionModal': { title: '‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø', button: '‡∞≤‡∞æ‡∞µ‡∞æ‡∞¶‡±á‡∞µ‡±Ä ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø' },
                'addAssetModal': { title: '‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø', button: '‡∞Ü‡∞∏‡±ç‡∞§‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø' }
            };
            
            if (modalTitles[modalId]) {
                const titleElement = document.querySelector(`#${modalId} .modal-title span`);
                const buttonElement = document.querySelector(`#${modalId} button[type="submit"] span`);
                
                if (titleElement) titleElement.textContent = modalTitles[modalId].title;
                if (buttonElement) buttonElement.textContent = modalTitles[modalId].button;
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'fas fa-info-circle';
            switch(type) {
                case 'success': icon = 'fas fa-check-circle'; break;
                case 'error': icon = 'fas fa-exclamation-circle'; break;
                case 'warning': icon = 'fas fa-exclamation-triangle'; break;
            }
            
            notification.innerHTML = `<i class="${icon}" style="margin-right: 0.5rem;"></i>${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }

        function getErrorMessage(errorCode) {
            const errorMessages = {
                'auth/invalid-email': '‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞®‡∞ø ‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ',
                'auth/user-disabled': '‡∞à ‡∞ñ‡∞æ‡∞§‡∞æ ‡∞®‡∞ø‡∞≤‡∞ø‡∞™‡∞ø‡∞µ‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø',
                'auth/user-not-found': '‡∞à ‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç‚Äå‡∞§‡±ã ‡∞ñ‡∞æ‡∞§‡∞æ ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å',
                'auth/wrong-password': '‡∞§‡∞™‡±ç‡∞™‡±Å ‡∞™‡∞æ‡∞∏‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞°‡±ç',
                'auth/email-already-in-use': '‡∞á‡∞Æ‡±Ü‡∞Ø‡∞ø‡∞≤‡±ç ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ ‡∞á‡∞™‡±ç‡∞™‡∞ü‡∞ø‡∞ï‡±á ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø',
                'auth/weak-password': '‡∞™‡∞æ‡∞∏‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞°‡±ç ‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç 6 ‡∞Ö‡∞ï‡±ç‡∞∑‡∞∞‡∞æ‡∞≤‡±Å ‡∞â‡∞Ç‡∞°‡∞æ‡∞≤‡∞ø',
                'auth/network-request-failed': '‡∞®‡±Ü‡∞ü‡±ç‚Äå‡∞µ‡∞∞‡±ç‡∞ï‡±ç ‡∞≤‡±ã‡∞™‡∞Ç. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡±Ä ‡∞á‡∞Ç‡∞ü‡∞∞‡±ç‡∞®‡±Ü‡∞ü‡±ç ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞∑‡∞®‡±ç‚Äå‡∞®‡±Å ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø',
                'auth/too-many-requests': '‡∞ö‡∞æ‡∞≤‡∞æ ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞µ‡∞ø‡∞´‡∞≤ ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞æ‡∞≤‡±Å. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø',
                'auth/invalid-phone-number': '‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞®‡∞ø ‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç ‡∞´‡∞æ‡∞∞‡±ç‡∞Æ‡∞æ‡∞ü‡±ç',
                'auth/missing-phone-number': '‡∞´‡±ã‡∞®‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç',
                'auth/quota-exceeded': 'SMS ‡∞ï‡±ã‡∞ü‡∞æ ‡∞Æ‡∞ø‡∞Ç‡∞ö‡∞ø‡∞™‡±ã‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø'
            };
            
            return errorMessages[errorCode] || '‡∞≤‡±ã‡∞™‡∞Ç ‡∞∏‡∞Ç‡∞≠‡∞µ‡∞ø‡∞Ç‡∞ö‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.';
        }

        // Initialize when page loads
        window.addEventListener('load', () => {
            // Apply initial theme
            const savedTheme = JSON.parse(localStorage.getItem(STORAGE_KEYS.SETTINGS) || '{}').theme;
            if (savedTheme) {
                setTheme(savedTheme);
            }
            
            // Apply initial language (Telugu by default)
            const savedLanguage = JSON.parse(localStorage.getItem(STORAGE_KEYS.SETTINGS) || '{}').language || 'te';
            changeLanguage(savedLanguage);
        });
    </script>
</body>
</html>
